
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Mathieu Klimczak">
      
      
      
        <link rel="prev" href="../tls_ssl/">
      
      
        <link rel="next" href="../kubernetes/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.2">
    
    
      
        <title>Docker - Arctic Vault</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f56500e0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono+Medium:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono Medium"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/mkdocsoad.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-for-the-absolute-beginner" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tÃªte">
    <a href="../.." title="Arctic Vault" class="md-header__button md-logo" aria-label="Arctic Vault" data-md-component="logo">
      
  <img src="../../images/noun_Robot_1955251.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arctic Vault
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Basculer en mode sombre"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Basculer en mode sombre" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Basculer en mode clair"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Basculer en mode clair" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Accueil
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../deep_learning/module1/Module1/" class="md-tabs__link">
        Deep Learning
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../mlops/docker/" class="md-tabs__link">
        MLOps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../azure_ml/intro/" class="md-tabs__link">
        AzureML
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../linux/" class="md-tabs__link md-tabs__link--active">
        DevOps 101
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../az104/az-ad/" class="md-tabs__link">
        AZ-104
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ide_vscode/conf/" class="md-tabs__link">
        Guidelines
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../lectures/gradient_centralization/" class="md-tabs__link">
        Lectures
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Arctic Vault" class="md-nav__button md-logo" aria-label="Arctic Vault" data-md-component="logo">
      
  <img src="../../images/noun_Robot_1955251.svg" alt="logo">

    </a>
    Arctic Vault
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Accueil
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Deep Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deep Learning" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Deep Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Introduction au deep learning, prise en main de Tensorflow et Keras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Introduction au deep learning, prise en main de Tensorflow et Keras" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Introduction au deep learning, prise en main de Tensorflow et Keras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module1/Module1/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module1/tp1/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Les rÃ©seaux de neurones convolutifs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Les rÃ©seaux de neurones convolutifs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Les rÃ©seaux de neurones convolutifs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module2/Module2/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module2/module2_annexe/" class="md-nav__link">
        Annexe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module2/tp2/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Preprocessing des donnÃ©es avec l'API tf.data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Preprocessing des donnÃ©es avec l'API tf.data" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Preprocessing des donnÃ©es avec l'API tf.data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module3/Module3/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_4">
          Optimisation et rÃ©gularisation des rÃ©seaux de neurones
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Optimisation et rÃ©gularisation des rÃ©seaux de neurones" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Optimisation et rÃ©gularisation des rÃ©seaux de neurones
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module4/Module4/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module4/Module4_2/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_5">
          Personnaliser son rÃ©seau de neurones
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Personnaliser son rÃ©seau de neurones" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Personnaliser son rÃ©seau de neurones
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module5/Module5/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module5/Module5_2/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          La segmentation d'images
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="La segmentation d'images" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          La segmentation d'images
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module6/module6/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module6/Module6_2/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" type="checkbox" id="__nav_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_7">
          Les modÃ¨les gÃ©nÃ©rateurs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Les modÃ¨les gÃ©nÃ©rateurs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Les modÃ¨les gÃ©nÃ©rateurs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module7/Module7_2/" class="md-nav__link">
        Pratique
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" type="checkbox" id="__nav_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_8">
          DÃ©ployer son rÃ©seau de neurones sur de l'embarquÃ©
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DÃ©ployer son rÃ©seau de neurones sur de l'embarquÃ©" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_8">
          <span class="md-nav__icon md-icon"></span>
          DÃ©ployer son rÃ©seau de neurones sur de l'embarquÃ©
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/module9/" class="md-nav__link">
        ThÃ©orie
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/tp9_elaguage/" class="md-nav__link">
        Pratique, l'Ã©lagage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/tp9_tflite/" class="md-nav__link">
        Pratique, TFLite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/Module9_TFTRT/" class="md-nav__link">
        Pratique, TFTRT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/fusion/" class="md-nav__link">
        Annexe, RepVGG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep_learning/module9/bnn/" class="md-nav__link">
        Les BNN
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" type="checkbox" id="__nav_2_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_9">
          AlgÃ¨bre tensorielle
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AlgÃ¨bre tensorielle" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          AlgÃ¨bre tensorielle
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../algebra/algebra/" class="md-nav__link">
        Les tenseurs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../algebra/attn/" class="md-nav__link">
        L'attention
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          MLOps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MLOps" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          MLOps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/DVC/" class="md-nav__link">
        Data versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/mlem/" class="md-nav__link">
        Model Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/featurestore/" class="md-nav__link">
        Feature store
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/hydra/" class="md-nav__link">
        Hydra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/monitoring/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/optuna/" class="md-nav__link">
        Optimisation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mlops/image_fastapi/" class="md-nav__link">
        REST API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          AzureML
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AzureML" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          AzureML
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/lesson1/" class="md-nav__link">
        SDK Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/lesson1_project/" class="md-nav__link">
        HyperDrive et AutoML
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/lesson2/" class="md-nav__link">
        DÃ©ployer un modÃ¨le
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/lesson3/" class="md-nav__link">
        Utilisation du modÃ¨le dÃ©ployÃ©
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/lesson4/" class="md-nav__link">
        Pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/annex1/" class="md-nav__link">
        Azure et Traefik
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../azure_ml/annex2/" class="md-nav__link">
        Azure et Caddy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          DevOps 101
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevOps 101" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          DevOps 101
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linux/" class="md-nav__link">
        Linux Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shell/" class="md-nav__link">
        Shell scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network/" class="md-nav__link">
        Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../applications/" class="md-nav__link">
        Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../web_server/" class="md-nav__link">
        Web Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../terminal/" class="md-nav__link">
        Terminal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tls_ssl/" class="md-nav__link">
        SSL et TLS
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Docker
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matiÃ¨res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matiÃ¨res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#survol" class="md-nav__link">
    Survol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-environnements-conteneurises" class="md-nav__link">
    Les environnements "conteneurisÃ©s"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-commandes-de-base" class="md-nav__link">
    Les commandes de base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-run" class="md-nav__link">
    docker run
  </a>
  
    <nav class="md-nav" aria-label="docker run">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-it" class="md-nav__link">
    -it
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-des-ports" class="md-nav__link">
    Mapping des ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspection" class="md-nav__link">
    Inspection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    logs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-images-docker" class="md-nav__link">
    Les images Docker
  </a>
  
    <nav class="md-nav" aria-label="Les images Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pourquoi-conteneuriser" class="md-nav__link">
    Pourquoi conteneuriser ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-creer-sa-propre-image" class="md-nav__link">
    Comment crÃ©er sa propre image ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-de-limage" class="md-nav__link">
    Construction de l'image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#une-architecture-en-couches" class="md-nav__link">
    Une architecture en couches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-variables-denvironnement" class="md-nav__link">
    Les variables d'environnement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd-versus-entrypoint" class="md-nav__link">
    CMD versus ENTRYPOINT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    docker compose
  </a>
  
    <nav class="md-nav" aria-label="docker compose">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#surcharger-le-docker-composeyaml-pour-gerer-plusieur-environnements" class="md-nav__link">
    Surcharger le docker-compose.yaml pour gÃ©rer plusieur environnements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-engine-stockage" class="md-nav__link">
    Docker engine, stockage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reseau" class="md-nav__link">
    RÃ©seau
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-registry" class="md-nav__link">
    Docker registry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestration" class="md-nav__link">
    Orchestration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-et-vs-code-le-fichier-devcontainer" class="md-nav__link">
    Docker et VS Code : le fichier .devcontainer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#softwares" class="md-nav__link">
    Softwares
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../yaml/" class="md-nav__link">
        YAML
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../az_devops/" class="md-nav__link">
        AzDevOps pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../terraform/" class="md-nav__link">
        Terraform
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          AZ-104
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="AZ-104" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          AZ-104
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../az104/az-ad/" class="md-nav__link">
        Managing Azure Active Directory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../az104/sub_and_gov/" class="md-nav__link">
        Subscription and Governance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Guidelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guidelines" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Guidelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ide_vscode/conf/" class="md-nav__link">
        IDE vscode
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc_redaction/mkdocs/" class="md-nav__link">
        MkDocs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc_redaction/diagrammes/" class="md-nav__link">
        Diagrammes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Formating, Linting, Type Hinting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Formating, Linting, Type Hinting" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Formating, Linting, Type Hinting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../format_lint_hint/format/" class="md-nav__link">
        Formating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../format_lint_hint/lint/" class="md-nav__link">
        Linting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../format_lint_hint/hint/" class="md-nav__link">
        Hint
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" type="checkbox" id="__nav_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_4">
          Tests
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tests" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/unittests/" class="md-nav__link">
        Test unitaire
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" type="checkbox" id="__nav_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5">
          CI/CD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CI/CD" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          CI/CD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cicd/precommit/" class="md-nav__link">
        Pre-commit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_6" type="checkbox" id="__nav_7_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_6">
          Code quality
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code quality" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_6">
          <span class="md-nav__icon md-icon"></span>
          Code quality
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code_quality/radon/" class="md-nav__link">
        Radon
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_7" type="checkbox" id="__nav_7_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_7">
          Code security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code security" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          Code security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code_security/bandit/" class="md-nav__link">
        Bandit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Lectures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lectures" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Lectures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lectures/gradient_centralization/" class="md-nav__link">
        Gradient Centralization
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matiÃ¨res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matiÃ¨res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#survol" class="md-nav__link">
    Survol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-environnements-conteneurises" class="md-nav__link">
    Les environnements "conteneurisÃ©s"
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-commandes-de-base" class="md-nav__link">
    Les commandes de base
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-run" class="md-nav__link">
    docker run
  </a>
  
    <nav class="md-nav" aria-label="docker run">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-it" class="md-nav__link">
    -it
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapping-des-ports" class="md-nav__link">
    Mapping des ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspection" class="md-nav__link">
    Inspection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    logs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-images-docker" class="md-nav__link">
    Les images Docker
  </a>
  
    <nav class="md-nav" aria-label="Les images Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pourquoi-conteneuriser" class="md-nav__link">
    Pourquoi conteneuriser ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comment-creer-sa-propre-image" class="md-nav__link">
    Comment crÃ©er sa propre image ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-de-limage" class="md-nav__link">
    Construction de l'image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#une-architecture-en-couches" class="md-nav__link">
    Une architecture en couches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-variables-denvironnement" class="md-nav__link">
    Les variables d'environnement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd-versus-entrypoint" class="md-nav__link">
    CMD versus ENTRYPOINT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    docker compose
  </a>
  
    <nav class="md-nav" aria-label="docker compose">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#surcharger-le-docker-composeyaml-pour-gerer-plusieur-environnements" class="md-nav__link">
    Surcharger le docker-compose.yaml pour gÃ©rer plusieur environnements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-engine-stockage" class="md-nav__link">
    Docker engine, stockage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reseau" class="md-nav__link">
    RÃ©seau
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-registry" class="md-nav__link">
    Docker registry
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestration" class="md-nav__link">
    Orchestration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-et-vs-code-le-fichier-devcontainer" class="md-nav__link">
    Docker et VS Code : le fichier .devcontainer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#softwares" class="md-nav__link">
    Softwares
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="docker-for-the-absolute-beginner">Docker for the absolute beginner</h1>
<h2 id="survol">Survol</h2>
<p>Que sont les conteneurs Docker ? Un conteneur est un environnement informatique complÃ¨tement isolÃ© :</p>
<ul>
<li>il a son propre rÃ©seau,</li>
<li>il a ses propres processus,</li>
<li>il a ses propres volumes montÃ©s,</li>
</ul>
<p>tout comme des machines virtuelles. <strong>Vraiment</strong> ? Pas vraiment, la diffÃ©rence majeure avec une machine virtuelle est que tous les conteneurs d'un mÃªme systÃ¨me partagent le mÃªme kernel.</p>
<p>Les OS Linux (Ubuntu, Fedora, CentOS, etc) sont tous basÃ©s sur le mÃªme socle : ils possÃ¨de un noyau (le kernel Linux) qui est responsables de l'interaction avec le hardware, et un ensemble de softwares.</p>
<p>Le kernel Linux reste le mÃªme peu importe la distribution, c'est la collection de softwares prÃ©sents qui rend Ubuntu diffÃ©rent de Fedora, CentOS, etc.</p>
<p>Donc lorsque l'on dit que l'ensemble des conteneurs partagent le mÃªme kernel, on veut dire par lÃ  que Docker utilise directement le noyau de l'hÃ´te sur lequel il tourne en faisant abstraction de la couche software. Les conteneurs peuvent donc faire tourner n'importe quel software ou OS tant qu'il est basÃ© sur le mÃªme noyau Linux que l'hÃ´te.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Quel OS n'est pas basÃ© sur un noyau Linux ? Windows.</p>
<p>Cela veut donc dire que Docker ne pourra pas faire tourner des conteneurs avec un OS/software Windows sur un hÃ´te Linux, et inversement. Il faudra un serveur avec Windows Server pour faire tourner des conteneurs windows.</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Si vous connaissez Docker, vous allez surement surement dire que c'est faux. <strong>Vous pouvez trÃ¨s bien installer Docker sur Windows, lancer un conteneur Ubuntu et travailler dedans sans soucis.</strong></p>
<p>La diffÃ©rence est que le conteneur Ubuntu ne tourne pas directement sur windows, comme sur un OS Linux classique, windows lance d'abord une VM Linux et ce conteneur va alors tourner Ã  l'intÃ©rieur de la VM Linux, ce qui rajoute une couche supplÃ©mentaire par rapport Ã  Docker sur un OS Linux classique.</p>
</div>
<h2 id="les-environnements-conteneurises">Les environnements "conteneurisÃ©s"</h2>
<p>Un conteneur Docker a la mÃªme idÃ©e qu'un conteneur physique : pensez-y comme Ã  une boÃ®te contenant une application.</p>
<p>Ã l'intÃ©rieur de la boÃ®te, l'application semble avoir un ordinateur Ã  elle toute seule : elle a son propre nom de machine et sa propre adresse IP, et elle a aussi son propre disque (les conteneurs Windows ont aussi leur propre registre Windows).</p>
<p>Ces Ã©lÃ©ments sont tous des ressources virtuelles :</p>
<ul>
<li>le nom d'hÃ´te,</li>
<li>l'adresse IP,</li>
<li>le systÃ¨me de fichiers sont crÃ©Ã©s par Docker.</li>
</ul>
<p>Ce sont des objets logiques qui sont gÃ©rÃ©s et crÃ©Ã©s par Docker, et ils sont tous rÃ©unis pour crÃ©er un environnement dans lequel une application peut s'exÃ©cuter. C'est la "boÃ®te" du conteneur.</p>
<p>L'application Ã  l'intÃ©rieur du conteneur ne peut rien voir Ã  l'extÃ©rieur du conteneur, mais le conteneur est exÃ©cutÃ©e sur un ordinateur, et cet ordinateur peut Ã©galement exÃ©cuter de nombreux autres conteneurs. Les applications dans ces conteneurs ont leurs propres environnements distincts (gÃ©rÃ©s par Docker), mais elles partagent toutes le CPU, GPU, et la mÃ©moire de l'ordinateur, et elles partagent toutes le systÃ¨me d'exploitation de l'ordinateur.</p>
<div class="admonition info">
<p class="admonition-title">Remarque</p>
<p>Notez ici que les conteneurs sont diffÃ©rents des machines virtuelles.</p>
<ul>
<li>
<p>Les machines virtuelles nÃ©cessitent que l'hyperviseur virtualise une pile matÃ©rielle complÃ¨te. Il y a Ã©galement plusieurs systÃ¨mes d'exploitation invitÃ©s, ce qui les rend plus grands et plus Ã©tendus Ã  dÃ©marrer. C'est ce que sont les instances de cloud AWS/GCP/Azure.</p>
</li>
<li>
<p>Les conteneurs, quant Ã  eux, ne nÃ©cessitent aucune virtualisation de l'hyperviseur ou du matÃ©riel. Tous les conteneurs partagent le mÃªme noyau hÃ´te. Ils existent comme des environnements d'espace utilisateur isolÃ©s et dÃ©diÃ©s, ce qui les rend beaucoup plus petits en taille et plus rapides Ã  dÃ©marrer.</p>
</li>
</ul>
</div>
<p><img alt="screen" src="../images/docker.svg" /></p>
<p>Les conteneurs font tourner des instances "d'images" dÃ©finies chacunes par un <code>Dockerfile</code>.</p>
<div class="admonition info">
<p class="admonition-title">TLDR</p>
<ol>
<li>Un Dockerfile dÃ©finit comment construire une image.</li>
<li>Une image est un environnement packagÃ© contruit par un Dockerfile.</li>
<li>Le conteneur Docker est l'endroit oÃ¹ l'image est lancÃ©e.</li>
</ol>
</div>
<p>Docker possÃ¨de une api qui lui est propre et qui permet de lancer, gÃ©rer, stopper des conteneurs, avant de voir la rÃ©daction d'un Dockerfile, voyons les commandes de base de cette api.</p>
<h2 id="les-commandes-de-base">Les commandes de base</h2>
<table>
<thead>
<tr>
<th align="center">Commande</th>
<th align="center">RÃ©sultat</th>
<th align="center">Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>docker run image_name</code></td>
<td align="center">lance un conteneur portant le nom <code>image_name</code></td>
<td align="center"><code>docker run ubuntu</code></td>
</tr>
<tr>
<td align="center"><code>docker ps</code></td>
<td align="center">liste l'ensemble des conteneurs lancÃ©s</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>docker ps -a</code></td>
<td align="center">liste l'ensemble des conteneurs prÃ©sents sur l'hÃ´te, qu'ils soient lancÃ©s ou non.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>docker stop container_id</code> ou <code>docker stop container_name</code></td>
<td align="center">stoppe le conteneur avec l'id ou le nom associÃ©.</td>
<td align="center"><code>docker stop 57ff613a495d</code>  <code>docker stop blissful_leakey</code></td>
</tr>
<tr>
<td align="center"><code>docker rm container_name</code></td>
<td align="center">supprime un conteneur <strong>stoppÃ©</strong></td>
<td align="center"><code>docker rm blissful_leakey</code></td>
</tr>
<tr>
<td align="center"><code>docker images</code> ou <code>docker image ls</code></td>
<td align="center">liste l'ensemble des images prÃ©sentes sur l'hÃ´te</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>docker rmi image_name</code></td>
<td align="center">supprime localement l'image</td>
<td align="center"><code>docker rmi ubuntu</code></td>
</tr>
<tr>
<td align="center"><code>docker pull image_name</code></td>
<td align="center">tÃ©lÃ©charge l'image depuis le registre associÃ© sans la lancer</td>
<td align="center"><code>docker pull ubuntu</code></td>
</tr>
<tr>
<td align="center"><code>docker exec container_name command</code></td>
<td align="center">exÃ©cute une commande Ã  l'intÃ©rieur d'un <strong>conteneur lancÃ©</strong></td>
<td align="center"><code>docker exec pedantic_boyd cat /etc/hosts</code></td>
</tr>
<tr>
<td align="center"><code>docker run image_name -d</code></td>
<td align="center">lance un conteneur portant le nom <code>image_name</code> en mode dÃ©tachÃ© (ou dÃ©mon), permet de ne pas bloquer le terminal</td>
<td align="center"><code>docker run ubuntu -d</code></td>
</tr>
<tr>
<td align="center"><code>docker attach container_id</code> ou <code>docker attach container_name</code></td>
<td align="center">permet de se rattacher Ã  un conteneur lancÃ© en mode dÃ©tachÃ©</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>docker pull image_name</code></td>
<td align="center">tÃ©lÃ©charge l'image depuis le registre associÃ© sans la lancer</td>
<td align="center"><code>docker pull ubuntu</code></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><code>docker run</code> : si l'image permettant de lancer le conteneur n'est pas disponible localement, Docker se chargera de la tÃ©lÃ©charger via le <strong>registre de conteneur (container registry)</strong> auquel l'image est assignÃ© (la plupart du temps ce registre est Docker hub, mais Ã§a peut aussi Ãªtre nvcr (NVidia Container Registry), ghcr (GitHub Container Registry), etc.). Le tÃ©lÃ©chargement n'est fait qu'une seule fois, <strong>tant que l'image n'est pas supprimÃ©e localement</strong>.</p>
</li>
<li>
<p><code>docker ps</code> : chaque conteneur se voit attribuer une id et un nom uniques par Docker au moment oÃ¹ ils sont lancÃ©s.</p>
</li>
</ul>
<p>La commande Linux <code>ps</code> affiche des informations sur une sÃ©lection de processus actifs.</p>
<p>Par dÃ©faut, ps sÃ©lectionne tous les processus ayant le mÃªme ID utilisateur effectif (euid=EUID) que l'utilisateur actuel et associÃ©s au mÃªme terminal que l'invocateur.</p>
<p>Il affiche l'ID du processus (pid=PID), le terminal associÃ© au processus (tname=TTY), le temps CPU cumulÃ© au format [DD-]hh<img alt="ð²ð²" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f1f2-1f1f2.svg" title=":mm:" />ss (time=TIME), et le nom de l'exÃ©cutable (ucmd=CMD).</p>
<p>La commande <code>docker ps</code> fait alors la mÃªme chose mais pour les conteneurs qui sont lancÃ©s, la commande affiche :</p>
<ol>
<li>l'id du conteneur,</li>
<li>le nom de l'image associÃ©e (s'il y en a une),</li>
<li>la derniÃ¨re commande lancÃ©e au dÃ©marrage du conteneur,</li>
<li>quand il a Ã©tÃ© crÃ©Ã©,</li>
<li>depuis quand il est lancÃ©,</li>
<li>les ports sur lesquels il est ouvert</li>
<li>son nom, qui est dÃ©finit de faÃ§on alÃ©atoire par Docker si on ne le spÃ©cifie pas.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>ps
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">                                                           </span>COMMAND<span class="w">                  </span>CREATED<span class="w">       </span>STATUS<span class="w">       </span>PORTS<span class="w">                                         </span>NAMES
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>57ff613a495d<span class="w">   </span>vsc-formation-deep-mlops-9214107b363d7791a4e04f86ccc94a41-uid<span class="w">   </span><span class="s2">&quot;/bin/sh -c &#39;echo Coâ¦&quot;</span><span class="w">   </span><span class="m">2</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">   </span>Up<span class="w"> </span><span class="m">2</span><span class="w"> </span>hours<span class="w">   </span><span class="m">0</span>.0.0.0:49153-&gt;8000/tcp,<span class="w"> </span>:::49153-&gt;8000/tcp<span class="w">   </span>funny_volhard
</code></pre></div></td></tr></table></div>
<p>Il est alors aussi possible de voir <strong>l'ensemble des conteneurs prÃ©sents sur l'hÃ´te</strong>, <strong>qu'ils soient lancÃ©s ou non</strong> en rajoutant le paramÃ¨tre <code>-a</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>ps<span class="w"> </span>-a
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">                                                           </span>COMMAND<span class="w">                  </span>CREATED<span class="w">       </span>STATUS<span class="w">                  </span>PORTS<span class="w">                                         </span>NAMES
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>57ff613a495d<span class="w">   </span>vsc-formation-deep-mlops-9214107b363d7791a4e04f86ccc94a41-uid<span class="w">   </span><span class="s2">&quot;/bin/sh -c &#39;echo Coâ¦&quot;</span><span class="w">   </span><span class="m">2</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">   </span>Up<span class="w"> </span><span class="m">2</span><span class="w"> </span>hours<span class="w">              </span><span class="m">0</span>.0.0.0:49153-&gt;8000/tcp,<span class="w"> </span>:::49153-&gt;8000/tcp<span class="w">   </span>funny_volhard
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>4c65fccd22d6<span class="w">   </span>swaggerapi/swagger-ui<span class="w">                                           </span><span class="s2">&quot;/docker-entrypoint.â¦&quot;</span><span class="w">   </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">    </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">                                                 </span>beautiful_faraday
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>7a3bbac61d2a<span class="w">   </span>swaggerapi/swagger-ui<span class="w">                                           </span><span class="s2">&quot;/docker-entrypoint.â¦&quot;</span><span class="w">   </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">    </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">                                                 </span>elated_lamarr
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>016e85e65d32<span class="w">   </span>swaggerapi/swagger-ui<span class="w">                                           </span><span class="s2">&quot;/docker-entrypoint.â¦&quot;</span><span class="w">   </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">    </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">                                                 </span>distracted_perlman
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>a504962076cd<span class="w">   </span>swaggerapi/swagger-ui<span class="w">                                           </span><span class="s2">&quot;/docker-entrypoint.â¦&quot;</span><span class="w">   </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">    </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">                                                 </span>blissful_leakey
</code></pre></div></td></tr></table></div>
<ul>
<li><code>docker rmi</code> : l'ensemble des conteneurs dÃ©pendants de cette image doivent Ãªtre stoppÃ©s avant de pouvoir supprimer l'image.</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Un conteneur ne "vit" que tant que le processus qui est censÃ© Ãªtre lancÃ© Ã  l'intÃ©rieur tourne. Lancer <code>docker run ubuntu</code>, ne lancera pas un conteneur avec ubuntu, <strong>car on a dÃ©finit aucun processus que ce conteneur devrait hÃ©berger</strong> ! Comme on peut le voir dans les lignes suivantes, notre conteneur ubuntu s'est stoppÃ© tout de suite.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>ubuntu
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>Unable<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>image<span class="w"> </span><span class="s1">&#39;ubuntu:latest&#39;</span><span class="w"> </span>locally
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>latest:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>library/ubuntu
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>125a6e411906:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>Digest:<span class="w"> </span>sha256:26c68657ccce2cb0a31b330cb0be2b5e108d467f641c62e13ab40cbec258c68d
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>Status:<span class="w"> </span>Downloaded<span class="w"> </span>newer<span class="w"> </span>image<span class="w"> </span><span class="k">for</span><span class="w"> </span>ubuntu:latest
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>â¯<span class="w"> </span>docker<span class="w"> </span>ps
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">                                                           </span>COMMAND<span class="w">                  </span>CREATED<span class="w">       </span>STATUS<span class="w">       </span>PORTS<span class="w">                                         </span>NAMES
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>â¯<span class="w"> </span>docker<span class="w"> </span>ps<span class="w"> </span>-a
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">                                                           </span>COMMAND<span class="w">                  </span>CREATED<span class="w">         </span>STATUS<span class="w">                     </span>PORTS<span class="w">                                         </span>NAMES
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>9a74f900a9ef<span class="w">   </span>ubuntu<span class="w">                                                          </span><span class="s2">&quot;bash&quot;</span><span class="w">                   </span><span class="m">7</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">   </span>Exited<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="m">6</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">                                                 </span>pedantic_boyd
</code></pre></div></td></tr></table></div>
<p>Si le processus lancÃ© Ã  l'intÃ©rieur du conteneur crash ou s'arrÃªte, le conteneur s'arrÃªtera aussi.</p>
</div>
<ul>
<li><code>docker exec</code></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>ps
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">                                                           </span>COMMAND<span class="w">                  </span>CREATED<span class="w">          </span>STATUS<span class="w">          </span>PORTS<span class="w">                                         </span>NAMES
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>5c1204184739<span class="w">   </span>ubuntu<span class="w">                                                          </span><span class="s2">&quot;sleep 50&quot;</span><span class="w">               </span><span class="m">11</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">   </span>Up<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds<span class="w">                                                 </span>suspicious_almeida
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>â¯<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>suspicious_almeida<span class="w"> </span>cat<span class="w"> </span>/etc/hosts
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="m">127</span>.0.0.1<span class="w">   </span>localhost
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>::1<span class="w"> </span>localhost<span class="w"> </span>ip6-localhost<span class="w"> </span>ip6-loopback
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>fe00::0<span class="w"> </span>ip6-localnet
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>ff00::0<span class="w"> </span>ip6-mcastprefix
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>ff02::1<span class="w"> </span>ip6-allnodes
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>ff02::2<span class="w"> </span>ip6-allrouters
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="m">172</span>.17.0.3<span class="w">  </span>5c1204184739
</code></pre></div></td></tr></table></div>
<p>Un conteneur lancÃ© comme <code>ubuntu</code> s'arrÃªtera tout de suite car il n'y a aucun processus de lancer dedans, cependant on peut quand mÃªme lancer ce conteneur et travailler dedans en le rendant interactif via la commande suivante.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">it pour interactif</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>root@767920134d27:/#<span class="w">  </span>cat<span class="w"> </span>/etc/os-release
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">&quot;Ubuntu 22.04 LTS&quot;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;Ubuntu&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="nv">VERSION_ID</span><span class="o">=</span><span class="s2">&quot;22.04&quot;</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="nv">VERSION</span><span class="o">=</span><span class="s2">&quot;22.04 LTS (Jammy Jellyfish)&quot;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="nv">VERSION_CODENAME</span><span class="o">=</span>jammy
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="nv">ID</span><span class="o">=</span>ubuntu
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="nv">ID_LIKE</span><span class="o">=</span>debian
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">&quot;https://www.ubuntu.com/&quot;</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="nv">SUPPORT_URL</span><span class="o">=</span><span class="s2">&quot;https://help.ubuntu.com/&quot;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="nv">BUG_REPORT_URL</span><span class="o">=</span><span class="s2">&quot;https://bugs.launchpad.net/ubuntu/&quot;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="nv">PRIVACY_POLICY_URL</span><span class="o">=</span><span class="s2">&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="nv">UBUNTU_CODENAME</span><span class="o">=</span>jammy
<a id="__codelineno-4-17" name="__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a>root@767920134d27:/#<span class="w"> </span><span class="nb">exit</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="nb">exit</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>
<p><code>docker rmi $(docker images -aq)</code> : supprime toutes les images prÃ©sentes sur l'hÃ´te.</p>
</li>
<li>
<p><code>docker container rm $(docker ps -aq)</code> : supprime tous les conteneurs prÃ©sents sur l'hÃ´te.</p>
</li>
</ul>
<p>le paramÃ¨tre <code>-aq</code> prÃ©sent ici est l'abbrÃ©viation de <code>-a -q</code>, <code>-q</code> Ã©tant le paramÃ¨tre pour le mode "quiet", qui ne renvoie que l'id des conteneurs, par exemple dans la commande <code>docker ps -q</code>.</p>
<h2 id="docker-run"><code>docker run</code></h2>
<p>Voyons maintenant d'autres commandes de la famille <code>docker run</code>.</p>
<h3 id="-it"><code>-it</code></h3>
<p>Par dÃ©faut, le conteneur docker n'Ã©coute pas <code>stdin</code>, il n'a pas de terminal depuis lequel le lire. Il faut le lancer en mode interactif avec le paramÃ¨tre <code>-i</code>. Pour faire apparaitre le prompteur du terminal il faut rajouter le paramÃ¨tre <code>-t</code>, comme dans la commande <code>-it</code> vue un peu plus haut.</p>
<div class="admonition info">
<p class="admonition-title">Remarque</p>
<p>La plupart du temps on ne fait pas la diffÃ©rence entre <code>-i</code> pour interactif et <code>-it</code> pour interactif avec prompteur du terminal, on dit juste <code>-it</code> pour interactif par abus de langage.</p>
</div>
<h3 id="mapping-des-ports">Mapping des ports</h3>
<p>Supposons que j'ai pull <code>vorphus/helloworld-api:1.0</code> en local, qui est une API trÃ¨s simple que j'ai codÃ© et push sur dockerhub pour l'exemple, voir <a href="https://hub.docker.com/repository/docker/vorphus/helloworld-api">dockerhub</a> et <a href="https://github.com/Klimorg/helloworld-api">github</a> pour le code.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>vorphus/helloworld-api:1.0
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="m">1</span>.0:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>vorphus/helloworld-api
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>Digest:<span class="w"> </span>sha256:e8d49d5c9fc1924f1702d7b4bc3a28bb42c639fc9f87c6c2031a45859ca2d463
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>Status:<span class="w"> </span>Image<span class="w"> </span>is<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>date<span class="w"> </span><span class="k">for</span><span class="w"> </span>vorphus/helloworld-api:1.0
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>docker.io/vorphus/helloworld-api:1.0
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>vorphus/helloworld-api:1.0
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>INFO:<span class="w">     </span>Started<span class="w"> </span>server<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>INFO:<span class="w">     </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>application<span class="w"> </span>startup.
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>INFO:<span class="w">     </span>Application<span class="w"> </span>startup<span class="w"> </span>complete.
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>INFO:<span class="w">     </span>Uvicorn<span class="w"> </span>running<span class="w"> </span>on<span class="w"> </span>http://0.0.0.0:80<span class="w"> </span><span class="o">(</span>Press<span class="w"> </span>CTRL+C<span class="w"> </span>to<span class="w"> </span>quit<span class="o">)</span>
</code></pre></div></td></tr></table></div>
Si j'essaye de me connecter Ã  <code>http://0.0.0.0:80</code> pour essayer d'aller voir par exemple la documentation de l'api, la seule chose sur laquelle je vais tomber est la chose suivante.</p>
<p><img alt="oups" src="../images/oups.png" /></p>
<p>Pourquoi ? Comme dis plus haut, un conteneur docker est par dÃ©finition totalement isolÃ© du reste de l'environnement dans lequel il tourne. Si on veut qu'un conteneur communique avec l'extÃ©rieur, il faut le dire explicitement.</p>
<pre class="mermaid"><code>graph LR

    subgraph "Docker Host"
    A[helloworld-api &lt;br/&gt; 172.17.0.3 &lt;br/&gt; Conteneur]
    end

    B[RÃ©seau extÃ©rieur]

    A-.-|X|B</code></pre>
<p>Une combinaison de <code>docker inspect</code> et de <code>jq</code> permet de trouver l'adresse IP du conteneur.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>inspect<span class="w"> </span>helloworld<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s2">&quot;.[0].NetworkSettings.Networks.bridge.IPAddress&quot;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="s2">&quot;172.17.0.3:80&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Sauf que <strong>cette adresse IP est une adresse IP interne au docker host</strong>, et que donc on ne peut pas l'utiliser de l'extÃ©rieur. De mÃªme pour le port 80 dÃ©fini plus haut lorsque l'on a lancÃ© le conteneur : <strong>on ne peut pas accÃ©der Ã </strong> <code>172.17.0.3:80</code> <strong>depuis l'extÃ©rieur du docker host.</strong></p>
<p>La seule faÃ§on (pour l'instant) pour communiquer avec l'api serait alors d'utiliser la commande <code>docker exec</code> pour lancer une requÃªte via <code>curl</code> depuis l'intÃ©rieur du conteneur.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>helloworld-api<span class="w"> </span>curl<span class="w"> </span><span class="m">172</span>.17.0.3:80/hello/
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span>%<span class="w"> </span>Total<span class="w">    </span>%<span class="w"> </span>Received<span class="w"> </span>%<span class="w"> </span>Xferd<span class="w">  </span>Average<span class="w"> </span>Speed<span class="w">   </span>Time<span class="w">    </span>Time<span class="w">     </span>Time<span class="w">  </span>Current
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">                                 </span>Dload<span class="w">  </span>Upload<span class="w">   </span>Total<span class="w">   </span>Spent<span class="w">    </span>Left<span class="w">  </span>Speed
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="m">100</span><span class="w">    </span><span class="m">17</span><span class="w">  </span><span class="m">100</span><span class="w">    </span><span class="m">17</span><span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">17000</span><span class="w">      </span><span class="m">0</span><span class="w"> </span>--:--:--<span class="w"> </span>--:--:--<span class="w"> </span>--:--:--<span class="w"> </span><span class="m">17000</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="o">{</span><span class="s2">&quot;Hello&quot;</span>:<span class="s2">&quot;World&quot;</span><span class="o">}</span>%
</code></pre></div></td></tr></table></div>
Pas Ã©vident hein ? La solution est alors de dÃ©finir un point de passage <strong>en joignant un port du rÃ©seau extÃ©rieur au port du docker host concernÃ©</strong>, cela se fait via la commande suivante.</p>
<p><code>-p oustide_port:inside_docker_host_port</code></p>
<p>En lanÃ§ant la commande suivante.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>helloworld<span class="w"> </span>-p<span class="w"> </span><span class="m">80</span>:80<span class="w"> </span>vorphus/helloworld-api:1.0
</code></pre></div></td></tr></table></div>
Il est alors possible d'accÃ©der au conteneur docker depuis le rÃ©seau externe au docker host. La passerelle faisant le routage nÃ©cessaire.</p>
<pre class="mermaid"><code>graph LR

    subgraph "Docker Host"
    A[helloworld-api &lt;br/&gt; 172.17.0.3:80 &lt;br/&gt; Conteneur]
    end

    B[RÃ©seau extÃ©rieur &lt;br/&gt; 172.17.0.3:80]

    A-.-B</code></pre>
<p>On peut alors accÃ©der Ã  l'api depuis l'extÃ©rieur du conteneur.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>â¯<span class="w"> </span>http<span class="w"> </span><span class="m">172</span>.17.0.3:80/hello/
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>content-length:<span class="w"> </span><span class="m">17</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>content-type:<span class="w"> </span>application/json
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>date:<span class="w"> </span>Fri,<span class="w"> </span><span class="m">13</span><span class="w"> </span>May<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">18</span>:32:55<span class="w"> </span>GMT
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>server:<span class="w"> </span>uvicorn
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="o">{</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="s2">&quot;Hello&quot;</span>:<span class="w"> </span><span class="s2">&quot;World&quot;</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="o">}</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a>â¯<span class="w"> </span>curl<span class="w"> </span><span class="m">172</span>.17.0.3:80/hello/
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="o">{</span><span class="s2">&quot;Hello&quot;</span>:<span class="s2">&quot;World&quot;</span><span class="o">}</span>%
</code></pre></div></td></tr></table></div>
De la mÃªme faÃ§on, en se rendant Ã  l'adresse <code>0.0.0.0:80</code> depuis notre navigateur internet, on arrive sur la doc de l'api.</p>
<p><img alt="nice" src="../images/nice.png" /></p>
<h3 id="volumes">Volumes</h3>
<p>Pour faire persister de la donnÃ©e, ou pour en rÃ©cupÃ©rer depuis un conteneur, on peut utiliser des volumes, il en existe de deux types :
* les rÃ©pertoires montÃ©s,
* les volumes nommÃ©s.</p>
<p>Les rÃ©pertoires montÃ©s ont une fonctionnalitÃ© limitÃ©e par rapport aux volumes. Lorsque vous utilisez un rÃ©pertoire montÃ©, <strong>un fichier ou un rÃ©pertoire sur la machine hÃ´te</strong> est montÃ© dans un conteneur. Le fichier ou le rÃ©pertoire est rÃ©fÃ©rencÃ© par <strong>son chemin absolu sur la machine hÃ´te</strong>. En revanche, lorsque vous utilisez un volume nommÃ©, un nouveau rÃ©pertoire est crÃ©Ã© dans le rÃ©pertoire de stockage de Docker sur la machine hÃ´te, et <strong>Docker gÃ¨re le contenu de ce rÃ©pertoire</strong>.</p>
<p>Il n'est pas nÃ©cessaire que le fichier ou le rÃ©pertoire existe dÃ©jÃ  sur l'hÃ´te Docker. Il est crÃ©Ã© Ã  la demande s'il n'existe pas encore. Les rÃ©pertoires montÃ©s sont trÃ¨s performants, mais ils dÃ©pendent du fait que le systÃ¨me de fichiers de la machine hÃ´te dispose d'une structure de rÃ©pertoire spÃ©cifique. Si vous dÃ©veloppez de nouvelles applications Docker, envisagez plutÃ´t d'utiliser des volumes nommÃ©s. Vous ne pouvez pas utiliser les commandes Docker CLI pour gÃ©rer directement les rÃ©pertoires montÃ©s.</p>
<p>Les volumes nommÃ©s sont le mÃ©canisme privilÃ©giÃ© pour la persistance des donnÃ©es gÃ©nÃ©rÃ©es et utilisÃ©es par les conteneurs Docker. Alors que les rÃ©pertoires montÃ©s dÃ©pendent de la structure des rÃ©pertoires et du systÃ¨me d'exploitation de la machine hÃ´te, les volumes sont entiÃ¨rement gÃ©rÃ©s par Docker. Les volumes prÃ©sentent plusieurs avantages par rapport aux rÃ©pertoires montÃ©s :</p>
<ul>
<li>Les volumes nommÃ©s sont plus faciles Ã  sauvegarder ou Ã  migrer que les rÃ©pertoires montÃ©s.</li>
<li>Vous pouvez gÃ©rer les volumes nommÃ©s Ã  l'aide des commandes Docker CLI ou de l'API Docker.</li>
<li>Les volumes nommÃ©s fonctionnent sur les conteneurs Linux et Windows.</li>
<li>Les volumes nommÃ©s peuvent Ãªtre partagÃ©s de maniÃ¨re plus sÃ»re entre plusieurs conteneurs.</li>
<li>Les pilotes de volume vous permettent de stocker des volumes nommÃ©s sur des hÃ´tes ou des fournisseurs de clouds distants, de chiffrer le contenu des volumes ou d'ajouter d'autres fonctionnalitÃ©s.</li>
<li>Les nouveaux volumes nommÃ©s peuvent avoir leur contenu prÃ©-rempli par un conteneur.</li>
<li>Les volumes nommÃ©s sur Docker Desktop sont beaucoup plus performants que les rÃ©pertoires montÃ©s des hÃ´tes Mac et Windows.</li>
</ul>
<p>En outre, les volumes nommÃ©s sont souvent un meilleur choix que la persistance des donnÃ©es dans la couche inscriptible d'un conteneur, car un volume nommÃ©s n'augmente pas la taille des conteneurs qui l'utilisent et le contenu du volume existe en dehors du cycle de vie d'un conteneur donnÃ©.</p>
<p>l'api docker permet :
1. de crÃ©er des volumes : <code>docker volume create my-volume</code>,
2. de lister ceux prÃ©sent : <code>docker volume ls</code>,
3. d'inspecter un volume : <code>docker volume inspect my-volume</code>,
4. de supprimer un volume : <code>docker volume rm my-volume</code>,</p>
<p>Pour utiliser un volume avec un conteneur on ajoute alors la commande <code>-v my-volume:inside_container_path</code> Ã  la commande docker run <code>inside_container_path</code> est le chemin vers le rÃ©pertoire dans le conteneur correspondant aux volume, s'il n'existe pas, il sera crÃ©Ã©. Certaines images possÃ¨dent des chemins spÃ©cifiques, par exemple le conteneur pour la <a href="https://hub.docker.com/_/postgres">db postgres</a> dÃ©finit <code>/var/lib/postgresql/data</code> comme chemin par dÃ©faut vers lequel le volume qui contiendra les tables de la db doit pointer.</p>
<p>Voyons un exemple.</p>
<div class="admonition example">
<p class="admonition-title">Volume nommÃ©</p>
<p>CrÃ©ons un volume.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">CrÃ©ation du volume</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>my-volume
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>my-volume
</code></pre></div></td></tr></table></div>
<p>Nous allons monter ce volume sur un conteneur ubuntu:20.04.</p>
<p><div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Association du volume</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ubuntu<span class="w"> </span>-v<span class="w"> </span>my-volume:/opt/data<span class="w"> </span>ubuntu:20.04<span class="w"> </span>bash
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>Unable<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>image<span class="w"> </span><span class="s1">&#39;ubuntu:20.04&#39;</span><span class="w"> </span>locally
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="m">20</span>.04:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>library/ubuntu
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>d7bfe07ed847:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>Digest:<span class="w"> </span>sha256:fd92c36d3cb9b1d027c4d2a72c6bf0125da82425fc2ca37c414d4f010180dc19
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>Status:<span class="w"> </span>Downloaded<span class="w"> </span>newer<span class="w"> </span>image<span class="w"> </span><span class="k">for</span><span class="w"> </span>ubuntu:20.04
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>root@79fbf58313b5:/#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/opt/data/
</code></pre></div></td></tr></table></div>
Une fois dans <code>/opt/data/</code>, crÃ©ons un fichier <code>test.txt</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">CrÃ©ation du fichier</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>root@79fbf58313b5:/opt/data#<span class="w"> </span>touch<span class="w"> </span>test.txt
</code></pre></div></td></tr></table></div>
<p>Installons <code>vim</code>.</p>
<p><div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Installation de Vim</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>root@79fbf58313b5:/opt/data#<span class="w"> </span>apt<span class="w"> </span>update
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>...
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>root@79fbf58313b5:/opt/data#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>vim
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>Reading<span class="w"> </span>package<span class="w"> </span>lists...<span class="w"> </span>Done
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>Building<span class="w"> </span>dependency<span class="w"> </span>tree
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>Reading<span class="w"> </span>state<span class="w"> </span>information...<span class="w"> </span>Done
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>The<span class="w"> </span>following<span class="w"> </span>additional<span class="w"> </span>packages<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>installed:
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">  </span>alsa-topology-conf<span class="w"> </span>alsa-ucm-conf<span class="w"> </span>file<span class="w"> </span>libasound2<span class="w"> </span>libasound2-data<span class="w"> </span>libcanberra0<span class="w"> </span>libexpat1<span class="w"> </span>libgpm2<span class="w"> </span>libltdl7<span class="w"> </span>libmagic-mgc<span class="w"> </span>libmagic1<span class="w"> </span>libmpdec2<span class="w"> </span>libogg0<span class="w"> </span>libpython3.8<span class="w"> </span>libpython3.8-minimal<span class="w"> </span>libpython3.8-stdlib<span class="w"> </span>libreadline8<span class="w"> </span>libsqlite3-0
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">  </span>libssl1.1<span class="w"> </span>libtdb1<span class="w"> </span>libvorbis0a<span class="w"> </span>libvorbisfile3<span class="w"> </span>mime-support<span class="w"> </span>readline-common<span class="w"> </span>sound-theme-freedesktop<span class="w"> </span>vim-common<span class="w"> </span>vim-runtime<span class="w"> </span>xxd<span class="w"> </span>xz-utils
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>Suggested<span class="w"> </span>packages:
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span>libasound2-plugins<span class="w"> </span>alsa-utils<span class="w"> </span>libcanberra-gtk0<span class="w"> </span>libcanberra-pulse<span class="w"> </span>gpm<span class="w"> </span>readline-doc<span class="w"> </span>ctags<span class="w"> </span>vim-doc<span class="w"> </span>vim-scripts
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>The<span class="w"> </span>following<span class="w"> </span>NEW<span class="w"> </span>packages<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>installed:
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">  </span>alsa-topology-conf<span class="w"> </span>alsa-ucm-conf<span class="w"> </span>file<span class="w"> </span>libasound2<span class="w"> </span>libasound2-data<span class="w"> </span>libcanberra0<span class="w"> </span>libexpat1<span class="w"> </span>libgpm2<span class="w"> </span>libltdl7<span class="w"> </span>libmagic-mgc<span class="w"> </span>libmagic1<span class="w"> </span>libmpdec2<span class="w"> </span>libogg0<span class="w"> </span>libpython3.8<span class="w"> </span>libpython3.8-minimal<span class="w"> </span>libpython3.8-stdlib<span class="w"> </span>libreadline8<span class="w"> </span>libsqlite3-0
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">  </span>libssl1.1<span class="w"> </span>libtdb1<span class="w"> </span>libvorbis0a<span class="w"> </span>libvorbisfile3<span class="w"> </span>mime-support<span class="w"> </span>readline-common<span class="w"> </span>sound-theme-freedesktop<span class="w"> </span>vim<span class="w"> </span>vim-common<span class="w"> </span>vim-runtime<span class="w"> </span>xxd<span class="w"> </span>xz-utils
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="m">0</span><span class="w"> </span>upgraded,<span class="w"> </span><span class="m">30</span><span class="w"> </span>newly<span class="w"> </span>installed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>to<span class="w"> </span>remove<span class="w"> </span>and<span class="w"> </span><span class="m">7</span><span class="w"> </span>not<span class="w"> </span>upgraded.
<a id="__codelineno-13-16" name="__codelineno-13-16"></a>Need<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span><span class="m">14</span>.9<span class="w"> </span>MB<span class="w"> </span>of<span class="w"> </span>archives.
<a id="__codelineno-13-17" name="__codelineno-13-17"></a>After<span class="w"> </span>this<span class="w"> </span>operation,<span class="w"> </span><span class="m">70</span>.6<span class="w"> </span>MB<span class="w"> </span>of<span class="w"> </span>additional<span class="w"> </span>disk<span class="w"> </span>space<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>used.
<a id="__codelineno-13-18" name="__codelineno-13-18"></a>Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span><span class="k">continue</span>?<span class="w"> </span><span class="o">[</span>Y/n<span class="o">]</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a>...
</code></pre></div></td></tr></table></div>
Et Ã©crivons dedans <code>Bonjour, comment Ã§a va ?</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Ecriture du prochain prix Nobel de littÃ©rature</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a>root@79fbf58313b5:/opt/data#<span class="w"> </span>vim<span class="w"> </span>test.txt
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>root@79fbf58313b5:/opt/data#<span class="w"> </span><span class="nb">exit</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nb">exit</span>
</code></pre></div></td></tr></table></div>
<p>Quittons le conteneur, de par la commande <code>--rm</code> ajoutÃ©e dans le <code>docker run ...</code>, le conteneur est automatiquement supprimÃ© une fois qu'il est stoppÃ©. Pour montrer la persistence des donnÃ©es, remontons ce volume mais cette fois ci sur un conteneur ubuntu:18.04</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ubuntu2<span class="w"> </span>-v<span class="w"> </span>my-volume:/opt/data<span class="w"> </span>ubuntu:18.04<span class="w"> </span>bash
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>Unable<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>image<span class="w"> </span><span class="s1">&#39;ubuntu:18.04&#39;</span><span class="w"> </span>locally
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="m">18</span>.04:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>library/ubuntu
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>09db6f815738:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>Digest:<span class="w"> </span>sha256:478caf1bec1afd54a58435ec681c8755883b7eb843a8630091890130b15a79af
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>Status:<span class="w"> </span>Downloaded<span class="w"> </span>newer<span class="w"> </span>image<span class="w"> </span><span class="k">for</span><span class="w"> </span>ubuntu:18.04
<a id="__codelineno-15-7" name="__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a>root@830c7585cb75:/#<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/opt/data/
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>root@830c7585cb75:/opt/data#<span class="w"> </span>ls
<a id="__codelineno-15-10" name="__codelineno-15-10"></a>test.txt
<a id="__codelineno-15-11" name="__codelineno-15-11"></a>root@830c7585cb75:/opt/data#<span class="w"> </span>cat<span class="w"> </span>test.txt
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>Bonjour,<span class="w"> </span>comment<span class="w"> </span>a<span class="w"> </span>va<span class="w"> </span>?
</code></pre></div></td></tr></table></div>
<p>On retrouve bien notre texte alors que notre conteneur n'existe plus.</p>
</div>
<h3 id="inspection">Inspection</h3>
<p>Il est possible d'inspecter un conteneur, inspecter veut ici dire avoir accÃ¨s aux caractÃ©ristiques de ce conteneur : son adresse IP, son id, ses variables d'environnements, son Ã©tat.</p>
<ul>
<li><code>docker inspect container_id</code>,</li>
<li><code>docker inspect container_name</code>.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">  1</a></span>
<span class="normal"><a href="#__codelineno-16-2">  2</a></span>
<span class="normal"><a href="#__codelineno-16-3">  3</a></span>
<span class="normal"><a href="#__codelineno-16-4">  4</a></span>
<span class="normal"><a href="#__codelineno-16-5">  5</a></span>
<span class="normal"><a href="#__codelineno-16-6">  6</a></span>
<span class="normal"><a href="#__codelineno-16-7">  7</a></span>
<span class="normal"><a href="#__codelineno-16-8">  8</a></span>
<span class="normal"><a href="#__codelineno-16-9">  9</a></span>
<span class="normal"><a href="#__codelineno-16-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-16-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-16-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-16-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-16-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-16-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-16-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-16-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-16-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-16-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-16-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-16-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-16-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-16-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-16-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-16-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-16-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-16-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-16-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-16-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-16-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-16-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-16-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-16-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-16-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-16-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-16-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-16-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-16-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-16-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-16-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-16-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-16-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-16-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-16-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-16-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-16-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-16-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-16-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-16-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-16-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-16-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-16-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-16-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-16-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-16-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-16-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-16-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-16-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-16-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-16-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-16-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-16-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-16-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-16-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-16-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-16-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-16-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-16-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-16-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-16-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-16-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-16-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-16-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-16-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-16-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-16-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-16-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-16-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-16-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-16-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-16-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-16-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-16-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-16-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-16-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-16-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-16-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-16-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-16-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-16-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-16-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-16-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-16-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-16-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-16-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-16-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-16-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-16-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-16-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-16-100">100</a></span>
<span class="normal"><a href="#__codelineno-16-101">101</a></span>
<span class="normal"><a href="#__codelineno-16-102">102</a></span>
<span class="normal"><a href="#__codelineno-16-103">103</a></span>
<span class="normal"><a href="#__codelineno-16-104">104</a></span>
<span class="normal"><a href="#__codelineno-16-105">105</a></span>
<span class="normal"><a href="#__codelineno-16-106">106</a></span>
<span class="normal"><a href="#__codelineno-16-107">107</a></span>
<span class="normal"><a href="#__codelineno-16-108">108</a></span>
<span class="normal"><a href="#__codelineno-16-109">109</a></span>
<span class="normal"><a href="#__codelineno-16-110">110</a></span>
<span class="normal"><a href="#__codelineno-16-111">111</a></span>
<span class="normal"><a href="#__codelineno-16-112">112</a></span>
<span class="normal"><a href="#__codelineno-16-113">113</a></span>
<span class="normal"><a href="#__codelineno-16-114">114</a></span>
<span class="normal"><a href="#__codelineno-16-115">115</a></span>
<span class="normal"><a href="#__codelineno-16-116">116</a></span>
<span class="normal"><a href="#__codelineno-16-117">117</a></span>
<span class="normal"><a href="#__codelineno-16-118">118</a></span>
<span class="normal"><a href="#__codelineno-16-119">119</a></span>
<span class="normal"><a href="#__codelineno-16-120">120</a></span>
<span class="normal"><a href="#__codelineno-16-121">121</a></span>
<span class="normal"><a href="#__codelineno-16-122">122</a></span>
<span class="normal"><a href="#__codelineno-16-123">123</a></span>
<span class="normal"><a href="#__codelineno-16-124">124</a></span>
<span class="normal"><a href="#__codelineno-16-125">125</a></span>
<span class="normal"><a href="#__codelineno-16-126">126</a></span>
<span class="normal"><a href="#__codelineno-16-127">127</a></span>
<span class="normal"><a href="#__codelineno-16-128">128</a></span>
<span class="normal"><a href="#__codelineno-16-129">129</a></span>
<span class="normal"><a href="#__codelineno-16-130">130</a></span>
<span class="normal"><a href="#__codelineno-16-131">131</a></span>
<span class="normal"><a href="#__codelineno-16-132">132</a></span>
<span class="normal"><a href="#__codelineno-16-133">133</a></span>
<span class="normal"><a href="#__codelineno-16-134">134</a></span>
<span class="normal"><a href="#__codelineno-16-135">135</a></span>
<span class="normal"><a href="#__codelineno-16-136">136</a></span>
<span class="normal"><a href="#__codelineno-16-137">137</a></span>
<span class="normal"><a href="#__codelineno-16-138">138</a></span>
<span class="normal"><a href="#__codelineno-16-139">139</a></span>
<span class="normal"><a href="#__codelineno-16-140">140</a></span>
<span class="normal"><a href="#__codelineno-16-141">141</a></span>
<span class="normal"><a href="#__codelineno-16-142">142</a></span>
<span class="normal"><a href="#__codelineno-16-143">143</a></span>
<span class="normal"><a href="#__codelineno-16-144">144</a></span>
<span class="normal"><a href="#__codelineno-16-145">145</a></span>
<span class="normal"><a href="#__codelineno-16-146">146</a></span>
<span class="normal"><a href="#__codelineno-16-147">147</a></span>
<span class="normal"><a href="#__codelineno-16-148">148</a></span>
<span class="normal"><a href="#__codelineno-16-149">149</a></span>
<span class="normal"><a href="#__codelineno-16-150">150</a></span>
<span class="normal"><a href="#__codelineno-16-151">151</a></span>
<span class="normal"><a href="#__codelineno-16-152">152</a></span>
<span class="normal"><a href="#__codelineno-16-153">153</a></span>
<span class="normal"><a href="#__codelineno-16-154">154</a></span>
<span class="normal"><a href="#__codelineno-16-155">155</a></span>
<span class="normal"><a href="#__codelineno-16-156">156</a></span>
<span class="normal"><a href="#__codelineno-16-157">157</a></span>
<span class="normal"><a href="#__codelineno-16-158">158</a></span>
<span class="normal"><a href="#__codelineno-16-159">159</a></span>
<span class="normal"><a href="#__codelineno-16-160">160</a></span>
<span class="normal"><a href="#__codelineno-16-161">161</a></span>
<span class="normal"><a href="#__codelineno-16-162">162</a></span>
<span class="normal"><a href="#__codelineno-16-163">163</a></span>
<span class="normal"><a href="#__codelineno-16-164">164</a></span>
<span class="normal"><a href="#__codelineno-16-165">165</a></span>
<span class="normal"><a href="#__codelineno-16-166">166</a></span>
<span class="normal"><a href="#__codelineno-16-167">167</a></span>
<span class="normal"><a href="#__codelineno-16-168">168</a></span>
<span class="normal"><a href="#__codelineno-16-169">169</a></span>
<span class="normal"><a href="#__codelineno-16-170">170</a></span>
<span class="normal"><a href="#__codelineno-16-171">171</a></span>
<span class="normal"><a href="#__codelineno-16-172">172</a></span>
<span class="normal"><a href="#__codelineno-16-173">173</a></span>
<span class="normal"><a href="#__codelineno-16-174">174</a></span>
<span class="normal"><a href="#__codelineno-16-175">175</a></span>
<span class="normal"><a href="#__codelineno-16-176">176</a></span>
<span class="normal"><a href="#__codelineno-16-177">177</a></span>
<span class="normal"><a href="#__codelineno-16-178">178</a></span>
<span class="normal"><a href="#__codelineno-16-179">179</a></span>
<span class="normal"><a href="#__codelineno-16-180">180</a></span>
<span class="normal"><a href="#__codelineno-16-181">181</a></span>
<span class="normal"><a href="#__codelineno-16-182">182</a></span>
<span class="normal"><a href="#__codelineno-16-183">183</a></span>
<span class="normal"><a href="#__codelineno-16-184">184</a></span>
<span class="normal"><a href="#__codelineno-16-185">185</a></span>
<span class="normal"><a href="#__codelineno-16-186">186</a></span>
<span class="normal"><a href="#__codelineno-16-187">187</a></span>
<span class="normal"><a href="#__codelineno-16-188">188</a></span>
<span class="normal"><a href="#__codelineno-16-189">189</a></span>
<span class="normal"><a href="#__codelineno-16-190">190</a></span>
<span class="normal"><a href="#__codelineno-16-191">191</a></span>
<span class="normal"><a href="#__codelineno-16-192">192</a></span>
<span class="normal"><a href="#__codelineno-16-193">193</a></span>
<span class="normal"><a href="#__codelineno-16-194">194</a></span>
<span class="normal"><a href="#__codelineno-16-195">195</a></span>
<span class="normal"><a href="#__codelineno-16-196">196</a></span>
<span class="normal"><a href="#__codelineno-16-197">197</a></span>
<span class="normal"><a href="#__codelineno-16-198">198</a></span>
<span class="normal"><a href="#__codelineno-16-199">199</a></span>
<span class="normal"><a href="#__codelineno-16-200">200</a></span>
<span class="normal"><a href="#__codelineno-16-201">201</a></span>
<span class="normal"><a href="#__codelineno-16-202">202</a></span>
<span class="normal"><a href="#__codelineno-16-203">203</a></span>
<span class="normal"><a href="#__codelineno-16-204">204</a></span>
<span class="normal"><a href="#__codelineno-16-205">205</a></span>
<span class="normal"><a href="#__codelineno-16-206">206</a></span>
<span class="normal"><a href="#__codelineno-16-207">207</a></span>
<span class="normal"><a href="#__codelineno-16-208">208</a></span>
<span class="normal"><a href="#__codelineno-16-209">209</a></span>
<span class="normal"><a href="#__codelineno-16-210">210</a></span>
<span class="normal"><a href="#__codelineno-16-211">211</a></span>
<span class="normal"><a href="#__codelineno-16-212">212</a></span>
<span class="normal"><a href="#__codelineno-16-213">213</a></span>
<span class="normal"><a href="#__codelineno-16-214">214</a></span>
<span class="normal"><a href="#__codelineno-16-215">215</a></span>
<span class="normal"><a href="#__codelineno-16-216">216</a></span>
<span class="normal"><a href="#__codelineno-16-217">217</a></span>
<span class="normal"><a href="#__codelineno-16-218">218</a></span>
<span class="normal"><a href="#__codelineno-16-219">219</a></span>
<span class="normal"><a href="#__codelineno-16-220">220</a></span>
<span class="normal"><a href="#__codelineno-16-221">221</a></span>
<span class="normal"><a href="#__codelineno-16-222">222</a></span>
<span class="normal"><a href="#__codelineno-16-223">223</a></span>
<span class="normal"><a href="#__codelineno-16-224">224</a></span>
<span class="normal"><a href="#__codelineno-16-225">225</a></span>
<span class="normal"><a href="#__codelineno-16-226">226</a></span>
<span class="normal"><a href="#__codelineno-16-227">227</a></span>
<span class="normal"><a href="#__codelineno-16-228">228</a></span>
<span class="normal"><a href="#__codelineno-16-229">229</a></span>
<span class="normal"><a href="#__codelineno-16-230">230</a></span>
<span class="normal"><a href="#__codelineno-16-231">231</a></span>
<span class="normal"><a href="#__codelineno-16-232">232</a></span>
<span class="normal"><a href="#__codelineno-16-233">233</a></span>
<span class="normal"><a href="#__codelineno-16-234">234</a></span>
<span class="normal"><a href="#__codelineno-16-235">235</a></span>
<span class="normal"><a href="#__codelineno-16-236">236</a></span>
<span class="normal"><a href="#__codelineno-16-237">237</a></span>
<span class="normal"><a href="#__codelineno-16-238">238</a></span>
<span class="normal"><a href="#__codelineno-16-239">239</a></span>
<span class="normal"><a href="#__codelineno-16-240">240</a></span>
<span class="normal"><a href="#__codelineno-16-241">241</a></span>
<span class="normal"><a href="#__codelineno-16-242">242</a></span>
<span class="normal"><a href="#__codelineno-16-243">243</a></span>
<span class="normal"><a href="#__codelineno-16-244">244</a></span>
<span class="normal"><a href="#__codelineno-16-245">245</a></span>
<span class="normal"><a href="#__codelineno-16-246">246</a></span>
<span class="normal"><a href="#__codelineno-16-247">247</a></span>
<span class="normal"><a href="#__codelineno-16-248">248</a></span>
<span class="normal"><a href="#__codelineno-16-249">249</a></span>
<span class="normal"><a href="#__codelineno-16-250">250</a></span>
<span class="normal"><a href="#__codelineno-16-251">251</a></span>
<span class="normal"><a href="#__codelineno-16-252">252</a></span>
<span class="normal"><a href="#__codelineno-16-253">253</a></span>
<span class="normal"><a href="#__codelineno-16-254">254</a></span>
<span class="normal"><a href="#__codelineno-16-255">255</a></span>
<span class="normal"><a href="#__codelineno-16-256">256</a></span>
<span class="normal"><a href="#__codelineno-16-257">257</a></span>
<span class="normal"><a href="#__codelineno-16-258">258</a></span>
<span class="normal"><a href="#__codelineno-16-259">259</a></span>
<span class="normal"><a href="#__codelineno-16-260">260</a></span>
<span class="normal"><a href="#__codelineno-16-261">261</a></span>
<span class="normal"><a href="#__codelineno-16-262">262</a></span>
<span class="normal"><a href="#__codelineno-16-263">263</a></span>
<span class="normal"><a href="#__codelineno-16-264">264</a></span>
<span class="normal"><a href="#__codelineno-16-265">265</a></span>
<span class="normal"><a href="#__codelineno-16-266">266</a></span>
<span class="normal"><a href="#__codelineno-16-267">267</a></span>
<span class="normal"><a href="#__codelineno-16-268">268</a></span>
<span class="normal"><a href="#__codelineno-16-269">269</a></span>
<span class="normal"><a href="#__codelineno-16-270">270</a></span>
<span class="normal"><a href="#__codelineno-16-271">271</a></span>
<span class="normal"><a href="#__codelineno-16-272">272</a></span>
<span class="normal"><a href="#__codelineno-16-273">273</a></span>
<span class="normal"><a href="#__codelineno-16-274">274</a></span>
<span class="normal"><a href="#__codelineno-16-275">275</a></span>
<span class="normal"><a href="#__codelineno-16-276">276</a></span>
<span class="normal"><a href="#__codelineno-16-277">277</a></span>
<span class="normal"><a href="#__codelineno-16-278">278</a></span>
<span class="normal"><a href="#__codelineno-16-279">279</a></span>
<span class="normal"><a href="#__codelineno-16-280">280</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>inspect<span class="w"> </span>priceless_johnson<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="o">[</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="o">{</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="s2">&quot;Id&quot;</span>:<span class="w"> </span><span class="s2">&quot;8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d&quot;</span>,
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="s2">&quot;Created&quot;</span>:<span class="w"> </span><span class="s2">&quot;2022-06-22T20:00:33.826646629Z&quot;</span>,
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="s2">&quot;Path&quot;</span>:<span class="w"> </span><span class="s2">&quot;/bin/sh&quot;</span>,
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="s2">&quot;Args&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">      </span><span class="s2">&quot;-c&quot;</span>,
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">      </span><span class="s2">&quot;echo Container started\ntrap \&quot;exit 0\&quot; 15\n\nexec \&quot;</span><span class="nv">$@</span><span class="s2">\&quot;\nwhile sleep 1 &amp; wait </span><span class="nv">$!</span><span class="s2">; do :; done&quot;</span>,
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">      </span><span class="s2">&quot;-&quot;</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">    </span><span class="o">]</span>,
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">    </span><span class="s2">&quot;State&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">      </span><span class="s2">&quot;Status&quot;</span>:<span class="w"> </span><span class="s2">&quot;running&quot;</span>,
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">      </span><span class="s2">&quot;Running&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">      </span><span class="s2">&quot;Paused&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">      </span><span class="s2">&quot;Restarting&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">      </span><span class="s2">&quot;OOMKilled&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">      </span><span class="s2">&quot;Dead&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">      </span><span class="s2">&quot;Pid&quot;</span>:<span class="w"> </span><span class="m">57036</span>,
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">      </span><span class="s2">&quot;ExitCode&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">      </span><span class="s2">&quot;Error&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">      </span><span class="s2">&quot;StartedAt&quot;</span>:<span class="w"> </span><span class="s2">&quot;2022-06-22T20:00:34.09197443Z&quot;</span>,
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">      </span><span class="s2">&quot;FinishedAt&quot;</span>:<span class="w"> </span><span class="s2">&quot;0001-01-01T00:00:00Z&quot;</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">    </span><span class="s2">&quot;Image&quot;</span>:<span class="w"> </span><span class="s2">&quot;sha256:f31c209a4471e0244fedefc92cd8257fbf5d67b6b8bb5c38a1e6a24e257ba12e&quot;</span>,
<a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="w">    </span><span class="s2">&quot;ResolvConfPath&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/containers/8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d/resolv.conf&quot;</span>,
<a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">    </span><span class="s2">&quot;HostnamePath&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/containers/8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d/hostname&quot;</span>,
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">    </span><span class="s2">&quot;HostsPath&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/containers/8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d/hosts&quot;</span>,
<a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">    </span><span class="s2">&quot;LogPath&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/containers/8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d/8e9ec6183d98510cd7735b5ea9fd3ee818a1a6c2c83b20f2aad4fc7427f4f56d-json.log&quot;</span>,
<a id="__codelineno-16-30" name="__codelineno-16-30"></a><span class="w">    </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;/priceless_johnson&quot;</span>,
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">    </span><span class="s2">&quot;RestartCount&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">    </span><span class="s2">&quot;Driver&quot;</span>:<span class="w"> </span><span class="s2">&quot;overlay2&quot;</span>,
<a id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="w">    </span><span class="s2">&quot;Platform&quot;</span>:<span class="w"> </span><span class="s2">&quot;linux&quot;</span>,
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">    </span><span class="s2">&quot;MountLabel&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="w">    </span><span class="s2">&quot;ProcessLabel&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">    </span><span class="s2">&quot;AppArmorProfile&quot;</span>:<span class="w"> </span><span class="s2">&quot;docker-default&quot;</span>,
<a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">    </span><span class="s2">&quot;ExecIDs&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">      </span><span class="s2">&quot;f0a524885bb5176b7cc0562688a3eddd3cc1ef08839670faef2d15d7c2f6ecce&quot;</span>,
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">      </span><span class="s2">&quot;953d55745a72ef924ecc72a3854e30704a1c49406997546c7e4eb5cb5fba754f&quot;</span>,
<a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="w">      </span><span class="s2">&quot;917aa2253c9d114f100aee1757c6f9f14e05e63c4d1c78318021280a93d9a739&quot;</span>,
<a id="__codelineno-16-41" name="__codelineno-16-41"></a><span class="w">      </span><span class="s2">&quot;ffdac6da8b352c2e3761e23ecc455809e5b741a0374f2980367cd1559d360cfc&quot;</span>,
<a id="__codelineno-16-42" name="__codelineno-16-42"></a><span class="w">      </span><span class="s2">&quot;866fd97e494db76f65ac041f55d1ee99192fdcee2a0950483cd48bd95ba2f2a6&quot;</span>,
<a id="__codelineno-16-43" name="__codelineno-16-43"></a><span class="w">      </span><span class="s2">&quot;3ac3c930d2530f7a600684963ff98d0271b01f98eea63d85a3ff0359dd40e3a7&quot;</span>,
<a id="__codelineno-16-44" name="__codelineno-16-44"></a><span class="w">      </span><span class="s2">&quot;b328fdaf15d0faa92b5473264836fb4d206119a147611e65b0114946490a7ce4&quot;</span>
<a id="__codelineno-16-45" name="__codelineno-16-45"></a><span class="w">    </span><span class="o">]</span>,
<a id="__codelineno-16-46" name="__codelineno-16-46"></a><span class="w">    </span><span class="s2">&quot;HostConfig&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-47" name="__codelineno-16-47"></a><span class="w">      </span><span class="s2">&quot;Binds&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-48" name="__codelineno-16-48"></a><span class="w">      </span><span class="s2">&quot;ContainerIDFile&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-49" name="__codelineno-16-49"></a><span class="w">      </span><span class="s2">&quot;LogConfig&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-50" name="__codelineno-16-50"></a><span class="w">        </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;json-file&quot;</span>,
<a id="__codelineno-16-51" name="__codelineno-16-51"></a><span class="w">        </span><span class="s2">&quot;Config&quot;</span>:<span class="w"> </span><span class="o">{}</span>
<a id="__codelineno-16-52" name="__codelineno-16-52"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-53" name="__codelineno-16-53"></a><span class="w">      </span><span class="s2">&quot;NetworkMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-16-54" name="__codelineno-16-54"></a><span class="w">      </span><span class="s2">&quot;PortBindings&quot;</span>:<span class="w"> </span><span class="o">{}</span>,
<a id="__codelineno-16-55" name="__codelineno-16-55"></a><span class="w">      </span><span class="s2">&quot;RestartPolicy&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-56" name="__codelineno-16-56"></a><span class="w">        </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;no&quot;</span>,
<a id="__codelineno-16-57" name="__codelineno-16-57"></a><span class="w">        </span><span class="s2">&quot;MaximumRetryCount&quot;</span>:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-16-58" name="__codelineno-16-58"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-59" name="__codelineno-16-59"></a><span class="w">      </span><span class="s2">&quot;AutoRemove&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-60" name="__codelineno-16-60"></a><span class="w">      </span><span class="s2">&quot;VolumeDriver&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-61" name="__codelineno-16-61"></a><span class="w">      </span><span class="s2">&quot;VolumesFrom&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-62" name="__codelineno-16-62"></a><span class="w">      </span><span class="s2">&quot;CapAdd&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-63" name="__codelineno-16-63"></a><span class="w">      </span><span class="s2">&quot;CapDrop&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-64" name="__codelineno-16-64"></a><span class="w">      </span><span class="s2">&quot;CgroupnsMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;host&quot;</span>,
<a id="__codelineno-16-65" name="__codelineno-16-65"></a><span class="w">      </span><span class="s2">&quot;Dns&quot;</span>:<span class="w"> </span><span class="o">[]</span>,
<a id="__codelineno-16-66" name="__codelineno-16-66"></a><span class="w">      </span><span class="s2">&quot;DnsOptions&quot;</span>:<span class="w"> </span><span class="o">[]</span>,
<a id="__codelineno-16-67" name="__codelineno-16-67"></a><span class="w">      </span><span class="s2">&quot;DnsSearch&quot;</span>:<span class="w"> </span><span class="o">[]</span>,
<a id="__codelineno-16-68" name="__codelineno-16-68"></a><span class="w">      </span><span class="s2">&quot;ExtraHosts&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-69" name="__codelineno-16-69"></a><span class="w">      </span><span class="s2">&quot;GroupAdd&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-70" name="__codelineno-16-70"></a><span class="w">      </span><span class="s2">&quot;IpcMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;private&quot;</span>,
<a id="__codelineno-16-71" name="__codelineno-16-71"></a><span class="w">      </span><span class="s2">&quot;Cgroup&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-72" name="__codelineno-16-72"></a><span class="w">      </span><span class="s2">&quot;Links&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-73" name="__codelineno-16-73"></a><span class="w">      </span><span class="s2">&quot;OomScoreAdj&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-74" name="__codelineno-16-74"></a><span class="w">      </span><span class="s2">&quot;PidMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-75" name="__codelineno-16-75"></a><span class="w">      </span><span class="s2">&quot;Privileged&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-76" name="__codelineno-16-76"></a><span class="w">      </span><span class="s2">&quot;PublishAllPorts&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-77" name="__codelineno-16-77"></a><span class="w">      </span><span class="s2">&quot;ReadonlyRootfs&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-78" name="__codelineno-16-78"></a><span class="w">      </span><span class="s2">&quot;SecurityOpt&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-79" name="__codelineno-16-79"></a><span class="w">      </span><span class="s2">&quot;UTSMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-80" name="__codelineno-16-80"></a><span class="w">      </span><span class="s2">&quot;UsernsMode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-81" name="__codelineno-16-81"></a><span class="w">      </span><span class="s2">&quot;ShmSize&quot;</span>:<span class="w"> </span><span class="m">67108864</span>,
<a id="__codelineno-16-82" name="__codelineno-16-82"></a><span class="w">      </span><span class="s2">&quot;Runtime&quot;</span>:<span class="w"> </span><span class="s2">&quot;runc&quot;</span>,
<a id="__codelineno-16-83" name="__codelineno-16-83"></a><span class="w">      </span><span class="s2">&quot;ConsoleSize&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-84" name="__codelineno-16-84"></a><span class="w">        </span><span class="m">0</span>,
<a id="__codelineno-16-85" name="__codelineno-16-85"></a><span class="w">        </span><span class="m">0</span>
<a id="__codelineno-16-86" name="__codelineno-16-86"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-87" name="__codelineno-16-87"></a><span class="w">      </span><span class="s2">&quot;Isolation&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-88" name="__codelineno-16-88"></a><span class="w">      </span><span class="s2">&quot;CpuShares&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-89" name="__codelineno-16-89"></a><span class="w">      </span><span class="s2">&quot;Memory&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-90" name="__codelineno-16-90"></a><span class="w">      </span><span class="s2">&quot;NanoCpus&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-91" name="__codelineno-16-91"></a><span class="w">      </span><span class="s2">&quot;CgroupParent&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-92" name="__codelineno-16-92"></a><span class="w">      </span><span class="s2">&quot;BlkioWeight&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-93" name="__codelineno-16-93"></a><span class="w">      </span><span class="s2">&quot;BlkioWeightDevice&quot;</span>:<span class="w"> </span><span class="o">[]</span>,
<a id="__codelineno-16-94" name="__codelineno-16-94"></a><span class="w">      </span><span class="s2">&quot;BlkioDeviceReadBps&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-95" name="__codelineno-16-95"></a><span class="w">      </span><span class="s2">&quot;BlkioDeviceWriteBps&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-96" name="__codelineno-16-96"></a><span class="w">      </span><span class="s2">&quot;BlkioDeviceReadIOps&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-97" name="__codelineno-16-97"></a><span class="w">      </span><span class="s2">&quot;BlkioDeviceWriteIOps&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-98" name="__codelineno-16-98"></a><span class="w">      </span><span class="s2">&quot;CpuPeriod&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-99" name="__codelineno-16-99"></a><span class="w">      </span><span class="s2">&quot;CpuQuota&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-100" name="__codelineno-16-100"></a><span class="w">      </span><span class="s2">&quot;CpuRealtimePeriod&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-101" name="__codelineno-16-101"></a><span class="w">      </span><span class="s2">&quot;CpuRealtimeRuntime&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-102" name="__codelineno-16-102"></a><span class="w">      </span><span class="s2">&quot;CpusetCpus&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-103" name="__codelineno-16-103"></a><span class="w">      </span><span class="s2">&quot;CpusetMems&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-104" name="__codelineno-16-104"></a><span class="w">      </span><span class="s2">&quot;Devices&quot;</span>:<span class="w"> </span><span class="o">[]</span>,
<a id="__codelineno-16-105" name="__codelineno-16-105"></a><span class="w">      </span><span class="s2">&quot;DeviceCgroupRules&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-106" name="__codelineno-16-106"></a><span class="w">      </span><span class="s2">&quot;DeviceRequests&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-107" name="__codelineno-16-107"></a><span class="w">      </span><span class="s2">&quot;KernelMemory&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-108" name="__codelineno-16-108"></a><span class="w">      </span><span class="s2">&quot;KernelMemoryTCP&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-109" name="__codelineno-16-109"></a><span class="w">      </span><span class="s2">&quot;MemoryReservation&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-110" name="__codelineno-16-110"></a><span class="w">      </span><span class="s2">&quot;MemorySwap&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-111" name="__codelineno-16-111"></a><span class="w">      </span><span class="s2">&quot;MemorySwappiness&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-112" name="__codelineno-16-112"></a><span class="w">      </span><span class="s2">&quot;OomKillDisable&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-113" name="__codelineno-16-113"></a><span class="w">      </span><span class="s2">&quot;PidsLimit&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-114" name="__codelineno-16-114"></a><span class="w">      </span><span class="s2">&quot;Ulimits&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-115" name="__codelineno-16-115"></a><span class="w">      </span><span class="s2">&quot;CpuCount&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-116" name="__codelineno-16-116"></a><span class="w">      </span><span class="s2">&quot;CpuPercent&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-117" name="__codelineno-16-117"></a><span class="w">      </span><span class="s2">&quot;IOMaximumIOps&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-118" name="__codelineno-16-118"></a><span class="w">      </span><span class="s2">&quot;IOMaximumBandwidth&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-119" name="__codelineno-16-119"></a><span class="w">      </span><span class="s2">&quot;Mounts&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-120" name="__codelineno-16-120"></a><span class="w">        </span><span class="o">{</span>
<a id="__codelineno-16-121" name="__codelineno-16-121"></a><span class="w">          </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;bind&quot;</span>,
<a id="__codelineno-16-122" name="__codelineno-16-122"></a><span class="w">          </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/media/vorph/datas/perso/formation-Deep-MLOps&quot;</span>,
<a id="__codelineno-16-123" name="__codelineno-16-123"></a><span class="w">          </span><span class="s2">&quot;Target&quot;</span>:<span class="w"> </span><span class="s2">&quot;/workspaces/formation-Deep-MLOps&quot;</span>
<a id="__codelineno-16-124" name="__codelineno-16-124"></a><span class="w">        </span><span class="o">}</span>,
<a id="__codelineno-16-125" name="__codelineno-16-125"></a><span class="w">        </span><span class="o">{</span>
<a id="__codelineno-16-126" name="__codelineno-16-126"></a><span class="w">          </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;bind&quot;</span>,
<a id="__codelineno-16-127" name="__codelineno-16-127"></a><span class="w">          </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/media/vorph/datas/perso/formation-Deep-MLOps&quot;</span>,
<a id="__codelineno-16-128" name="__codelineno-16-128"></a><span class="w">          </span><span class="s2">&quot;Target&quot;</span>:<span class="w"> </span><span class="s2">&quot;/home/vorph/ArcticVault&quot;</span>
<a id="__codelineno-16-129" name="__codelineno-16-129"></a><span class="w">        </span><span class="o">}</span>,
<a id="__codelineno-16-130" name="__codelineno-16-130"></a><span class="w">        </span><span class="o">{</span>
<a id="__codelineno-16-131" name="__codelineno-16-131"></a><span class="w">          </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;volume&quot;</span>,
<a id="__codelineno-16-132" name="__codelineno-16-132"></a><span class="w">          </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;vscode&quot;</span>,
<a id="__codelineno-16-133" name="__codelineno-16-133"></a><span class="w">          </span><span class="s2">&quot;Target&quot;</span>:<span class="w"> </span><span class="s2">&quot;/vscode&quot;</span>
<a id="__codelineno-16-134" name="__codelineno-16-134"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-16-135" name="__codelineno-16-135"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-136" name="__codelineno-16-136"></a><span class="w">      </span><span class="s2">&quot;MaskedPaths&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-137" name="__codelineno-16-137"></a><span class="w">        </span><span class="s2">&quot;/proc/asound&quot;</span>,
<a id="__codelineno-16-138" name="__codelineno-16-138"></a><span class="w">        </span><span class="s2">&quot;/proc/acpi&quot;</span>,
<a id="__codelineno-16-139" name="__codelineno-16-139"></a><span class="w">        </span><span class="s2">&quot;/proc/kcore&quot;</span>,
<a id="__codelineno-16-140" name="__codelineno-16-140"></a><span class="w">        </span><span class="s2">&quot;/proc/keys&quot;</span>,
<a id="__codelineno-16-141" name="__codelineno-16-141"></a><span class="w">        </span><span class="s2">&quot;/proc/latency_stats&quot;</span>,
<a id="__codelineno-16-142" name="__codelineno-16-142"></a><span class="w">        </span><span class="s2">&quot;/proc/timer_list&quot;</span>,
<a id="__codelineno-16-143" name="__codelineno-16-143"></a><span class="w">        </span><span class="s2">&quot;/proc/timer_stats&quot;</span>,
<a id="__codelineno-16-144" name="__codelineno-16-144"></a><span class="w">        </span><span class="s2">&quot;/proc/sched_debug&quot;</span>,
<a id="__codelineno-16-145" name="__codelineno-16-145"></a><span class="w">        </span><span class="s2">&quot;/proc/scsi&quot;</span>,
<a id="__codelineno-16-146" name="__codelineno-16-146"></a><span class="w">        </span><span class="s2">&quot;/sys/firmware&quot;</span>
<a id="__codelineno-16-147" name="__codelineno-16-147"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-148" name="__codelineno-16-148"></a><span class="w">      </span><span class="s2">&quot;ReadonlyPaths&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-149" name="__codelineno-16-149"></a><span class="w">        </span><span class="s2">&quot;/proc/bus&quot;</span>,
<a id="__codelineno-16-150" name="__codelineno-16-150"></a><span class="w">        </span><span class="s2">&quot;/proc/fs&quot;</span>,
<a id="__codelineno-16-151" name="__codelineno-16-151"></a><span class="w">        </span><span class="s2">&quot;/proc/irq&quot;</span>,
<a id="__codelineno-16-152" name="__codelineno-16-152"></a><span class="w">        </span><span class="s2">&quot;/proc/sys&quot;</span>,
<a id="__codelineno-16-153" name="__codelineno-16-153"></a><span class="w">        </span><span class="s2">&quot;/proc/sysrq-trigger&quot;</span>
<a id="__codelineno-16-154" name="__codelineno-16-154"></a><span class="w">      </span><span class="o">]</span>
<a id="__codelineno-16-155" name="__codelineno-16-155"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-16-156" name="__codelineno-16-156"></a><span class="w">    </span><span class="s2">&quot;GraphDriver&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-157" name="__codelineno-16-157"></a><span class="w">      </span><span class="s2">&quot;Data&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-158" name="__codelineno-16-158"></a><span class="w">        </span><span class="s2">&quot;LowerDir&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/overlay2/42cf1cd0e9e587b734a7dff5625e645142c665f383b87493b89555e94aaa7af1-init/diff:/var/lib/docker/overlay2/hnzq7cm6a2z2ohte6hho1h78t/diff:/var/lib/docker/overlay2/9kh5w9j7eyh85l5ipfhafow9o/diff:/var/lib/docker/overlay2/qfigtsio5azazz9e9lxj169fb/diff:/var/lib/docker/overlay2/87ksokwg6u08fi92v1moc014w/diff:/var/lib/docker/overlay2/6oqivtmk6c9txf77ak4z8rc97/diff:/var/lib/docker/overlay2/rk1z51dk5y3x08bpfs3wmgvz5/diff:/var/lib/docker/overlay2/ad56072d4bd05786d0cb51ccbae18dabb5301a0aab8a69ff45dae1eda5416650/diff:/var/lib/docker/overlay2/1d1ac677fca430ebd79ea8026d2e6f9e9361102694ac7c5bd45e483c68e058d1/diff:/var/lib/docker/overlay2/977ef22a55ad57077a5589b66376f4a1ce31de4bea199c33fa3b23d93adfd7a7/diff:/var/lib/docker/overlay2/c4c194d65ca3d69f354910d8ef452332137b93290dd8fb5fe6be23ec56dae577/diff:/var/lib/docker/overlay2/9278cccac45602c698dbb875772c52194474e53dfb4c88e6f56405997c51e116/diff&quot;</span>,
<a id="__codelineno-16-159" name="__codelineno-16-159"></a><span class="w">        </span><span class="s2">&quot;MergedDir&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/overlay2/42cf1cd0e9e587b734a7dff5625e645142c665f383b87493b89555e94aaa7af1/merged&quot;</span>,
<a id="__codelineno-16-160" name="__codelineno-16-160"></a><span class="w">        </span><span class="s2">&quot;UpperDir&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/overlay2/42cf1cd0e9e587b734a7dff5625e645142c665f383b87493b89555e94aaa7af1/diff&quot;</span>,
<a id="__codelineno-16-161" name="__codelineno-16-161"></a><span class="w">        </span><span class="s2">&quot;WorkDir&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/overlay2/42cf1cd0e9e587b734a7dff5625e645142c665f383b87493b89555e94aaa7af1/work&quot;</span>
<a id="__codelineno-16-162" name="__codelineno-16-162"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-163" name="__codelineno-16-163"></a><span class="w">      </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;overlay2&quot;</span>
<a id="__codelineno-16-164" name="__codelineno-16-164"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-16-165" name="__codelineno-16-165"></a><span class="w">    </span><span class="s2">&quot;Mounts&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-166" name="__codelineno-16-166"></a><span class="w">      </span><span class="o">{</span>
<a id="__codelineno-16-167" name="__codelineno-16-167"></a><span class="w">        </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;bind&quot;</span>,
<a id="__codelineno-16-168" name="__codelineno-16-168"></a><span class="w">        </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/media/vorph/datas/perso/formation-Deep-MLOps&quot;</span>,
<a id="__codelineno-16-169" name="__codelineno-16-169"></a><span class="w">        </span><span class="s2">&quot;Destination&quot;</span>:<span class="w"> </span><span class="s2">&quot;/workspaces/formation-Deep-MLOps&quot;</span>,
<a id="__codelineno-16-170" name="__codelineno-16-170"></a><span class="w">        </span><span class="s2">&quot;Mode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-171" name="__codelineno-16-171"></a><span class="w">        </span><span class="s2">&quot;RW&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-172" name="__codelineno-16-172"></a><span class="w">        </span><span class="s2">&quot;Propagation&quot;</span>:<span class="w"> </span><span class="s2">&quot;rprivate&quot;</span>
<a id="__codelineno-16-173" name="__codelineno-16-173"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-174" name="__codelineno-16-174"></a><span class="w">      </span><span class="o">{</span>
<a id="__codelineno-16-175" name="__codelineno-16-175"></a><span class="w">        </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;bind&quot;</span>,
<a id="__codelineno-16-176" name="__codelineno-16-176"></a><span class="w">        </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/media/vorph/datas/perso/formation-Deep-MLOps&quot;</span>,
<a id="__codelineno-16-177" name="__codelineno-16-177"></a><span class="w">        </span><span class="s2">&quot;Destination&quot;</span>:<span class="w"> </span><span class="s2">&quot;/home/vorph/ArcticVault&quot;</span>,
<a id="__codelineno-16-178" name="__codelineno-16-178"></a><span class="w">        </span><span class="s2">&quot;Mode&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-179" name="__codelineno-16-179"></a><span class="w">        </span><span class="s2">&quot;RW&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-180" name="__codelineno-16-180"></a><span class="w">        </span><span class="s2">&quot;Propagation&quot;</span>:<span class="w"> </span><span class="s2">&quot;rprivate&quot;</span>
<a id="__codelineno-16-181" name="__codelineno-16-181"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-182" name="__codelineno-16-182"></a><span class="w">      </span><span class="o">{</span>
<a id="__codelineno-16-183" name="__codelineno-16-183"></a><span class="w">        </span><span class="s2">&quot;Type&quot;</span>:<span class="w"> </span><span class="s2">&quot;volume&quot;</span>,
<a id="__codelineno-16-184" name="__codelineno-16-184"></a><span class="w">        </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;vscode&quot;</span>,
<a id="__codelineno-16-185" name="__codelineno-16-185"></a><span class="w">        </span><span class="s2">&quot;Source&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/lib/docker/volumes/vscode/_data&quot;</span>,
<a id="__codelineno-16-186" name="__codelineno-16-186"></a><span class="w">        </span><span class="s2">&quot;Destination&quot;</span>:<span class="w"> </span><span class="s2">&quot;/vscode&quot;</span>,
<a id="__codelineno-16-187" name="__codelineno-16-187"></a><span class="w">        </span><span class="s2">&quot;Driver&quot;</span>:<span class="w"> </span><span class="s2">&quot;local&quot;</span>,
<a id="__codelineno-16-188" name="__codelineno-16-188"></a><span class="w">        </span><span class="s2">&quot;Mode&quot;</span>:<span class="w"> </span><span class="s2">&quot;z&quot;</span>,
<a id="__codelineno-16-189" name="__codelineno-16-189"></a><span class="w">        </span><span class="s2">&quot;RW&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-190" name="__codelineno-16-190"></a><span class="w">        </span><span class="s2">&quot;Propagation&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-16-191" name="__codelineno-16-191"></a><span class="w">      </span><span class="o">}</span>
<a id="__codelineno-16-192" name="__codelineno-16-192"></a><span class="w">    </span><span class="o">]</span>,
<a id="__codelineno-16-193" name="__codelineno-16-193"></a><span class="w">    </span><span class="s2">&quot;Config&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-194" name="__codelineno-16-194"></a><span class="w">      </span><span class="s2">&quot;Hostname&quot;</span>:<span class="w"> </span><span class="s2">&quot;8e9ec6183d98&quot;</span>,
<a id="__codelineno-16-195" name="__codelineno-16-195"></a><span class="w">      </span><span class="s2">&quot;Domainname&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-196" name="__codelineno-16-196"></a><span class="w">      </span><span class="s2">&quot;User&quot;</span>:<span class="w"> </span><span class="s2">&quot;vorph&quot;</span>,
<a id="__codelineno-16-197" name="__codelineno-16-197"></a><span class="w">      </span><span class="s2">&quot;AttachStdin&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-198" name="__codelineno-16-198"></a><span class="w">      </span><span class="s2">&quot;AttachStdout&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-199" name="__codelineno-16-199"></a><span class="w">      </span><span class="s2">&quot;AttachStderr&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-200" name="__codelineno-16-200"></a><span class="w">      </span><span class="s2">&quot;ExposedPorts&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-201" name="__codelineno-16-201"></a><span class="w">        </span><span class="s2">&quot;8000/tcp&quot;</span>:<span class="w"> </span><span class="o">{}</span>
<a id="__codelineno-16-202" name="__codelineno-16-202"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-203" name="__codelineno-16-203"></a><span class="w">      </span><span class="s2">&quot;Tty&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-204" name="__codelineno-16-204"></a><span class="w">      </span><span class="s2">&quot;OpenStdin&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-205" name="__codelineno-16-205"></a><span class="w">      </span><span class="s2">&quot;StdinOnce&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-16-206" name="__codelineno-16-206"></a><span class="w">      </span><span class="s2">&quot;Env&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-207" name="__codelineno-16-207"></a><span class="w">        </span><span class="s2">&quot;PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/vorph/.local/bin:/usr/lib/python3.9/dist-packages&quot;</span>,
<a id="__codelineno-16-208" name="__codelineno-16-208"></a><span class="w">        </span><span class="s2">&quot;LANG=C.UTF-8&quot;</span>,
<a id="__codelineno-16-209" name="__codelineno-16-209"></a><span class="w">        </span><span class="s2">&quot;GPG_KEY=E3FF2839C048B25C084DEBE9B26995E310250568&quot;</span>,
<a id="__codelineno-16-210" name="__codelineno-16-210"></a><span class="w">        </span><span class="s2">&quot;PYTHON_VERSION=3.9.10&quot;</span>,
<a id="__codelineno-16-211" name="__codelineno-16-211"></a><span class="w">        </span><span class="s2">&quot;PYTHON_PIP_VERSION=21.2.4&quot;</span>,
<a id="__codelineno-16-212" name="__codelineno-16-212"></a><span class="w">        </span><span class="s2">&quot;PYTHON_SETUPTOOLS_VERSION=58.1.0&quot;</span>,
<a id="__codelineno-16-213" name="__codelineno-16-213"></a><span class="w">        </span><span class="s2">&quot;PYTHON_GET_PIP_URL=https://github.com/pypa/get-pip/raw/2caf84b14febcda8077e59e9b8a6ef9a680aa392/public/get-pip.py&quot;</span>,
<a id="__codelineno-16-214" name="__codelineno-16-214"></a><span class="w">        </span><span class="s2">&quot;PYTHON_GET_PIP_SHA256=7c5239cea323cadae36083079a5ee6b2b3d56f25762a0c060d2867b89e5e06c5&quot;</span>
<a id="__codelineno-16-215" name="__codelineno-16-215"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-216" name="__codelineno-16-216"></a><span class="w">      </span><span class="s2">&quot;Cmd&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-217" name="__codelineno-16-217"></a><span class="w">        </span><span class="s2">&quot;-c&quot;</span>,
<a id="__codelineno-16-218" name="__codelineno-16-218"></a><span class="w">        </span><span class="s2">&quot;echo Container started\ntrap \&quot;exit 0\&quot; 15\n\nexec \&quot;</span><span class="nv">$@</span><span class="s2">\&quot;\nwhile sleep 1 &amp; wait </span><span class="nv">$!</span><span class="s2">; do :; done&quot;</span>,
<a id="__codelineno-16-219" name="__codelineno-16-219"></a><span class="w">        </span><span class="s2">&quot;-&quot;</span>
<a id="__codelineno-16-220" name="__codelineno-16-220"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-221" name="__codelineno-16-221"></a><span class="w">      </span><span class="s2">&quot;Image&quot;</span>:<span class="w"> </span><span class="s2">&quot;vsc-formation-deep-mlops-13dc5d37553ea9bead783e4d89aa65ee-uid&quot;</span>,
<a id="__codelineno-16-222" name="__codelineno-16-222"></a><span class="w">      </span><span class="s2">&quot;Volumes&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-223" name="__codelineno-16-223"></a><span class="w">      </span><span class="s2">&quot;WorkingDir&quot;</span>:<span class="w"> </span><span class="s2">&quot;/home/vorph&quot;</span>,
<a id="__codelineno-16-224" name="__codelineno-16-224"></a><span class="w">      </span><span class="s2">&quot;Entrypoint&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-225" name="__codelineno-16-225"></a><span class="w">        </span><span class="s2">&quot;/bin/sh&quot;</span>
<a id="__codelineno-16-226" name="__codelineno-16-226"></a><span class="w">      </span><span class="o">]</span>,
<a id="__codelineno-16-227" name="__codelineno-16-227"></a><span class="w">      </span><span class="s2">&quot;OnBuild&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-228" name="__codelineno-16-228"></a><span class="w">      </span><span class="s2">&quot;Labels&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-229" name="__codelineno-16-229"></a><span class="w">        </span><span class="s2">&quot;devcontainer.local_folder&quot;</span>:<span class="w"> </span><span class="s2">&quot;/media/vorph/datas/perso/formation-Deep-MLOps&quot;</span>
<a id="__codelineno-16-230" name="__codelineno-16-230"></a><span class="w">      </span><span class="o">}</span>
<a id="__codelineno-16-231" name="__codelineno-16-231"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-16-232" name="__codelineno-16-232"></a><span class="w">    </span><span class="s2">&quot;NetworkSettings&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-233" name="__codelineno-16-233"></a><span class="w">      </span><span class="s2">&quot;Bridge&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-234" name="__codelineno-16-234"></a><span class="w">      </span><span class="s2">&quot;SandboxID&quot;</span>:<span class="w"> </span><span class="s2">&quot;44c6218be441ba34c2169970c77d6982a5143b466dec06cc909fb3c376cd987d&quot;</span>,
<a id="__codelineno-16-235" name="__codelineno-16-235"></a><span class="w">      </span><span class="s2">&quot;HairpinMode&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-16-236" name="__codelineno-16-236"></a><span class="w">      </span><span class="s2">&quot;LinkLocalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-237" name="__codelineno-16-237"></a><span class="w">      </span><span class="s2">&quot;LinkLocalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-238" name="__codelineno-16-238"></a><span class="w">      </span><span class="s2">&quot;Ports&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-239" name="__codelineno-16-239"></a><span class="w">        </span><span class="s2">&quot;8000/tcp&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-16-240" name="__codelineno-16-240"></a><span class="w">          </span><span class="o">{</span>
<a id="__codelineno-16-241" name="__codelineno-16-241"></a><span class="w">            </span><span class="s2">&quot;HostIp&quot;</span>:<span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span>,
<a id="__codelineno-16-242" name="__codelineno-16-242"></a><span class="w">            </span><span class="s2">&quot;HostPort&quot;</span>:<span class="w"> </span><span class="s2">&quot;49153&quot;</span>
<a id="__codelineno-16-243" name="__codelineno-16-243"></a><span class="w">          </span><span class="o">}</span>,
<a id="__codelineno-16-244" name="__codelineno-16-244"></a><span class="w">          </span><span class="o">{</span>
<a id="__codelineno-16-245" name="__codelineno-16-245"></a><span class="w">            </span><span class="s2">&quot;HostIp&quot;</span>:<span class="w"> </span><span class="s2">&quot;::&quot;</span>,
<a id="__codelineno-16-246" name="__codelineno-16-246"></a><span class="w">            </span><span class="s2">&quot;HostPort&quot;</span>:<span class="w"> </span><span class="s2">&quot;49153&quot;</span>
<a id="__codelineno-16-247" name="__codelineno-16-247"></a><span class="w">          </span><span class="o">}</span>
<a id="__codelineno-16-248" name="__codelineno-16-248"></a><span class="w">        </span><span class="o">]</span>
<a id="__codelineno-16-249" name="__codelineno-16-249"></a><span class="w">      </span><span class="o">}</span>,
<a id="__codelineno-16-250" name="__codelineno-16-250"></a><span class="w">      </span><span class="s2">&quot;SandboxKey&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/run/docker/netns/44c6218be441&quot;</span>,
<a id="__codelineno-16-251" name="__codelineno-16-251"></a><span class="w">      </span><span class="s2">&quot;SecondaryIPAddresses&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-252" name="__codelineno-16-252"></a><span class="w">      </span><span class="s2">&quot;SecondaryIPv6Addresses&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-253" name="__codelineno-16-253"></a><span class="w">      </span><span class="s2">&quot;EndpointID&quot;</span>:<span class="w"> </span><span class="s2">&quot;80f81b68db4b033695a0b2e08799f61c4c80571f53a52fcb65b53f1a68c3bc75&quot;</span>,
<a id="__codelineno-16-254" name="__codelineno-16-254"></a><span class="w">      </span><span class="s2">&quot;Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.1&quot;</span>,
<a id="__codelineno-16-255" name="__codelineno-16-255"></a><span class="w">      </span><span class="s2">&quot;GlobalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-256" name="__codelineno-16-256"></a><span class="w">      </span><span class="s2">&quot;GlobalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-257" name="__codelineno-16-257"></a><span class="w">      </span><span class="s2">&quot;IPAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.2&quot;</span>,
<a id="__codelineno-16-258" name="__codelineno-16-258"></a><span class="w">      </span><span class="s2">&quot;IPPrefixLen&quot;</span>:<span class="w"> </span><span class="m">16</span>,
<a id="__codelineno-16-259" name="__codelineno-16-259"></a><span class="w">      </span><span class="s2">&quot;IPv6Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-260" name="__codelineno-16-260"></a><span class="w">      </span><span class="s2">&quot;MacAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;02:42:ac:11:00:02&quot;</span>,
<a id="__codelineno-16-261" name="__codelineno-16-261"></a><span class="w">      </span><span class="s2">&quot;Networks&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-262" name="__codelineno-16-262"></a><span class="w">        </span><span class="s2">&quot;bridge&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-16-263" name="__codelineno-16-263"></a><span class="w">          </span><span class="s2">&quot;IPAMConfig&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-264" name="__codelineno-16-264"></a><span class="w">          </span><span class="s2">&quot;Links&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-265" name="__codelineno-16-265"></a><span class="w">          </span><span class="s2">&quot;Aliases&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-16-266" name="__codelineno-16-266"></a><span class="w">          </span><span class="s2">&quot;NetworkID&quot;</span>:<span class="w"> </span><span class="s2">&quot;d494ba95927d5944c6a7bab44aa41fc10842997700429378d0f8b982499a5dcf&quot;</span>,
<a id="__codelineno-16-267" name="__codelineno-16-267"></a><span class="w">          </span><span class="s2">&quot;EndpointID&quot;</span>:<span class="w"> </span><span class="s2">&quot;80f81b68db4b033695a0b2e08799f61c4c80571f53a52fcb65b53f1a68c3bc75&quot;</span>,
<a id="__codelineno-16-268" name="__codelineno-16-268"></a><span class="w">          </span><span class="s2">&quot;Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.1&quot;</span>,
<a id="__codelineno-16-269" name="__codelineno-16-269"></a><span class="w">          </span><span class="s2">&quot;IPAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.2&quot;</span>,
<a id="__codelineno-16-270" name="__codelineno-16-270"></a><span class="w">          </span><span class="s2">&quot;IPPrefixLen&quot;</span>:<span class="w"> </span><span class="m">16</span>,
<a id="__codelineno-16-271" name="__codelineno-16-271"></a><span class="w">          </span><span class="s2">&quot;IPv6Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-272" name="__codelineno-16-272"></a><span class="w">          </span><span class="s2">&quot;GlobalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-16-273" name="__codelineno-16-273"></a><span class="w">          </span><span class="s2">&quot;GlobalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-16-274" name="__codelineno-16-274"></a><span class="w">          </span><span class="s2">&quot;MacAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;02:42:ac:11:00:02&quot;</span>,
<a id="__codelineno-16-275" name="__codelineno-16-275"></a><span class="w">          </span><span class="s2">&quot;DriverOpts&quot;</span>:<span class="w"> </span>null
<a id="__codelineno-16-276" name="__codelineno-16-276"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-16-277" name="__codelineno-16-277"></a><span class="w">      </span><span class="o">}</span>
<a id="__codelineno-16-278" name="__codelineno-16-278"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-16-279" name="__codelineno-16-279"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-16-280" name="__codelineno-16-280"></a><span class="o">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="logs">logs</h3>
<p>Pour voir les logs qu'un conteneur sort sur <code>stdout</code>, on peut utiliser l'un des deux commandes suivantes.</p>
<ul>
<li><code>docker logs container_id</code>,</li>
<li><code>docker logs container_name</code>.</li>
</ul>
<p>Ces commandes ne fournirons les logs qu'Ã  l'instant t, si l'on souhaite voir les logs en continu, il faut rajouter l'argument <code>-f</code></p>
<ul>
<li><code>docker logs -f container_id</code>,</li>
<li><code>docker logs -f container_name</code>.</li>
</ul>
<h2 id="les-images-docker">Les images Docker</h2>
<h3 id="pourquoi-conteneuriser">Pourquoi conteneuriser ?</h3>
<p>Une Ã©tape pour atteindre la reproductibilitÃ© consiste Ã  dÃ©ployer le code et les artefacts versionnÃ©s dans un environnement reproductible. Cela va bien au-delÃ  de l'environnement virtuel que l'on peut configurer pour les applications Python, car il existe des spÃ©cifications au niveau du systÃ¨me (systÃ¨me d'exploitation, paquets requis, etc.) qui ne sont pas prises en compte par un simple environnement virtuel. Nous voulons Ãªtre en mesure d'encapsuler toutes les exigences dont nous avons besoin afin qu'il n'y ait pas de dÃ©pendances externes qui empÃªcheraient quelqu'un d'autre de reproduire l'application de faÃ§on exacte.</p>
<h3 id="comment-creer-sa-propre-image">Comment crÃ©er sa propre image ?</h3>
<p>Dans docker, tout commence par la rÃ©daction d'un <code>Dockerfile</code>, c'est un simple script que vous Ã©crivez pour dire comment vous allez monter et faire fonctionner votre conteneur docker.</p>
<p>Le langage docker est simple Ã  comprendre, les tÃ¢ches les plus communes ont leur propres commandes, et pour tout le reste vous pouvez utiliser les commandes shell standards (Bash sur Linux, ou PowerShell sur Windows par exemple).</p>
<p>Pour voir comment s'Ã©crit un <code>Dockerfile</code>, comment construire l'image et lancer le conteneur, prenons l'exemple suivant. C'est un <code>Dockerfile</code> standard que l'on peut utiliser pour entraÃ®ner des modÃ¨les de deep learning.</p>
<div class="admonition docker">
<p class="admonition-title">Dockerfile</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">nvcr.io/nvidia/tensorflow:21.02-tf2-py3</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="k">COPY</span><span class="w"> </span>requirements-dev.txt<span class="w"> </span>.
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USERNAME</span><span class="o">=</span>vorph
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USER_UID</span><span class="o">=</span><span class="m">1000</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USER_GID</span><span class="o">=</span><span class="m">1000</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="k">RUN</span><span class="w"> </span>groupadd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$USER_GID</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$USERNAME</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="k">RUN</span><span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER_UID</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">$USER_GID</span><span class="w"> </span>-o<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span><span class="nv">$USERNAME</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="k">USER</span><span class="w"> </span><span class="s">$USERNAME</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="k">ENV</span><span class="w"> </span>PATH<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:/home/vorph/.local/bin&quot;</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="k">RUN</span><span class="w"> </span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;pip install -r requirements.txt&quot;</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="k">RUN</span><span class="w"> </span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;pip install -r requirements-dev.txt&quot;</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">5000</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">8001</span>
</code></pre></div></td></tr></table></div>
</div>
<p>Un <code>Dockerfile</code> est une suite d'instructions suivies de l'argument correspondant, chaque instruction Ã©tant une couche (layer) du <code>Dockerfile</code>.</p>
<p>La toute premiÃ¨re instruction est toujours la mÃªme, <strong>elle dÃ©termine quelle sera l'image de base de votre conteneur</strong>, est-ce que votre conteneur sera construit sur une base d'OS Ubuntu 18.02, 20.04, sur une base Python 3.8, etc. Ici l'image en question est <code>nvcr.io/nvidia/tensorflow:21.02-tf2-py3</code> une image de TensorFlow 2.4 faite par NVidia, ce qui permet de ne pas avoir Ã  se soucier des problÃ¨mes d'installation ou de dÃ©pendances (cuda, cudnn, etc).</p>
<div class="admonition note">
<p class="admonition-title">La premiÃ¨re couche</p>
<p>Cette premiÃ¨re couche commence toujours par un <code>FROM</code>, pour dire Ã  partir de quelle image de base vous allez construire votre Dockerfile.</p>
<p>Il existe ce que l'on appelle des "registres dockers" (docker registry), oÃ¹ de maniÃ¨re similaire Ã  github, gitlab, etc sont recensÃ©s les images docker de faÃ§on la plupart du temps open source, le plus connu Ã©tant <a href="https://hub.docker.com/">docker hub</a>. Pour rÃ©cupÃ©rer une image, la commande similaire au "git clone <em>adresse</em>" est "docker pull <em>adresse</em>", et donc d'oÃ¹ vient votre image de base pour votre Dockerfile ?</p>
</div>
<p><code>COPY</code> est la commande permettant de copier des dossiers depuis votre machine locale vers votre conteneur Docker. Ici <code>COPY requirements.txt .</code> copie le fichier <code>requirements.txt</code> vers <code>.</code>, ie Ã  la racine dÃ©finie dans l'image <code>nvcr.io/nvidia/tensorflow:21.02-tf2-py3</code>.</p>
<div class="admonition note">
<p class="admonition-title">Syntaxe</p>
<p>La syntaxe est <code>COPY dossier_source dossier_cible</code>.</p>
</div>
<p>Par dÃ©faut, toutes les instructions lancÃ©es dans un conteneur docker se font en mode super-admin. Certaines application ayant besoin d'un rÃ©pertoire <code>/home/</code>, il est souvent nÃ©cessaire de crÃ©er un utilisateur, ce qui est fait dans les lignes suivantes.</p>
<div class="admonition docker">
<p class="admonition-title">CrÃ©ation d'un utilisateur</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USERNAME</span><span class="o">=</span>vorph
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USER_UID</span><span class="o">=</span><span class="m">1000</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="k">ARG</span><span class="w"> </span><span class="nv">USER_GID</span><span class="o">=</span><span class="m">1000</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="k">RUN</span><span class="w"> </span>groupadd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$USER_GID</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$USERNAME</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="k">RUN</span><span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER_UID</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">$USER_GID</span><span class="w"> </span>-o<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span><span class="nv">$USERNAME</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="k">USER</span><span class="w"> </span><span class="s">$USERNAME</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="construction-de-limage">Construction de l'image</h3>
<p>Maintenant que votre Dockerfile est rÃ©digÃ©, vous pouvez construire votre image. Le dÃ©part est toujours le mÃªme : <code>sudo docker build</code>, suivi d'argument.</p>
<div class="admonition note">
<p class="admonition-title">Remarque</p>
<p>les commandes docker dans le terminal ont besoin d'Ãªtre passÃ© en super-admin, si vous souhaitez ne plus avoir Ã  taper <code>sudo docker build</code> mais simplement <code>docker build</code>, <code>docker run</code>, etc vous devez crÃ©er un groupe docker et vous ajouter en tant qu'utilisateur dedans. Pour cela, suivez les instructions de la doc officielle. <a href="https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user">Manage Docker as a non-root user</a></p>
</div>
<div class="admonition docker">
<p class="admonition-title">docker build</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span>
<span class="normal"><a href="#__codelineno-19-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a>docker<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a>--build-arg<span class="w"> </span><span class="nv">USER_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>--build-arg<span class="w"> </span><span class="nv">USER_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a>--rm<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>-f<span class="w"> </span>Dockerfile<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>-t<span class="w"> </span>project_ai<span class="w"> </span>.
</code></pre></div></td></tr></table></div>
</div>
<p>Les deux arguments <code>--build-arg</code> correspondent aux mÃªmes arguments <code>ARG</code> dans le Dockerfile, <code>ARG USER_UID=1000</code> signifiant que la valeur par dÃ©faut de USER_ID est 1000, <code>--build-arg</code> permet de rÃ©Ã©crire au dessus pour Ãªtre sur d'avoir les bonnes valeurs correspondant au couple <code>uid:gid</code> de votre machine locale.</p>
<p><code>--rm</code> permet de supprimer les conteneurs intermÃ©diaires utilisÃ©s uniquement durant la construction.</p>
<p><code>-f Dockerfile</code> spÃ©cifie quel Dockerfile doit Ãªtre utilisÃ© pour la construction, ici celui nommÃ© simplement <code>Dockerfile</code>. Le nommage des Dockerfile se fait de la faÃ§on suivante : <code>Dockerfile.suffixe</code>, par exemple vous pourriez avoir deux Dockerfiles diffÃ©rents</p>
<ul>
<li><code>Dockerfile.cpu</code>,</li>
<li><code>Dockerfile.gpu</code>,</li>
</ul>
<p>oÃ¹ les instructions de construction Ã  l'intÃ©rieur du Dockerfile seraient diffÃ©rentes que vous utilisiez le gpu ou non. Dans ce cas vous pourriez avoir les commandes suivantes.</p>
<div class="admonition docker">
<p class="admonition-title">docker build</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a>docker<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>--build-arg<span class="w"> </span><span class="nv">USER_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a>--build-arg<span class="w"> </span><span class="nv">USER_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>--rm<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>-f<span class="w"> </span>Dockerfile.cpu<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>-t<span class="w"> </span>project_ai<span class="w"> </span>.
</code></pre></div></td></tr></table></div>
ou</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a>docker<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a>--build-arg<span class="w"> </span><span class="nv">USER_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a>--build-arg<span class="w"> </span><span class="nv">USER_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a>--rm<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>-f<span class="w"> </span>Dockerfile.gpu<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a>-t<span class="w"> </span>project_ai<span class="w"> </span>.
</code></pre></div></td></tr></table></div>
</div>
<p>Enfin, <code>-t project_ai</code> dÃ©finit le nom que prendra l'image, ici "project_ai".</p>
<p>Le point <code>.</code> Ã  la fin de la commande docker build signifie Ã  docker qu'il doit chercher le Dockerfile dans le rÃ©pertoire actuel.</p>
<div class="admonition note">
<p class="admonition-title">Remarque</p>
<p>Beaucoup d'autres options sont disponibles, n'hÃ©sitez pas Ã  regarder la <a href="https://docs.docker.com/engine/reference/commandline/build/#options">documentation sur les options de construction</a>.</p>
</div>
<h3 id="une-architecture-en-couches">Une architecture en couches</h3>
<p>Comme on l'a vu prÃ©cÃ©dement, un Dockerfile est une suite d'instructions, pour rÃ©duire l'accÃ¨s mÃ©moire et amÃ©liorer la vitesse de construction des conteneurs, chaque instruction est gardÃ©e en mÃ©moire cache. Une mÃªme instruction peut alors Ãªtre utilisÃ©e plusieurs fois par plusieurs conteneurs, de plus docker ne relance une instruction que s'il dÃ©tecte une modification dans cette deniÃ¨re. <strong>Si docker dÃ©tecte une modification dans une couche, il relancera alors aussi toutes les couches suivantes</strong>.</p>
<p>Prenons pour exemple l'api suivante, trÃ¨s simple.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span>
<span class="normal"><a href="#__codelineno-22-23">23</a></span>
<span class="normal"><a href="#__codelineno-22-24">24</a></span>
<span class="normal"><a href="#__codelineno-22-25">25</a></span>
<span class="normal"><a href="#__codelineno-22-26">26</a></span>
<span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">status</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="kn">from</span> <span class="nn">fastapi.middleware.cors</span> <span class="kn">import</span> <span class="n">CORSMiddleware</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="kn">import</span> <span class="nn">uvicorn</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a>    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Mathieu&#39;s API&quot;</span><span class="p">,</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Simple API to be used as a docker tutorial&quot;</span><span class="p">,</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a>    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="p">)</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="n">app</span><span class="o">.</span><span class="n">add_middleware</span><span class="p">(</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a>    <span class="n">CORSMiddleware</span><span class="p">,</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a>    <span class="n">allow_origins</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a>    <span class="n">allow_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a>    <span class="n">allow_methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a>    <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="p">)</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a>    <span class="s2">&quot;/hello/&quot;</span><span class="p">,</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a>    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">],</span>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a>    <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a>    <span class="n">response_description</span><span class="o">=</span><span class="s2">&quot;Hello !&quot;</span><span class="p">,</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a>    <span class="n">summary</span><span class="o">=</span><span class="s2">&quot;resume&quot;</span><span class="p">,</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a><span class="p">)</span>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">get_hello</span><span class="p">():</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;Hello&quot;</span><span class="p">:</span> <span class="s2">&quot;World&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Pour la dÃ©ployer facilement oÃ¹ l'on veux, on rÃ©dige le Dockerfile suivant.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/code</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="k">COPY</span><span class="w"> </span>./requirements.txt<span class="w"> </span>/code/requirements.txt
<a id="__codelineno-23-6" name="__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--upgrade<span class="w"> </span>-r<span class="w"> </span>/code/requirements.txt
<a id="__codelineno-23-8" name="__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="k">COPY</span><span class="w"> </span>./app<span class="w"> </span>/code/app
<a id="__codelineno-23-10" name="__codelineno-23-10"></a>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uvicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.main:app&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--host&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--port&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;80&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Si par exemple suite Ã  une pull request de <a href="https://github.com/dependabot">dependabot</a>, je mets Ã  jour le fichier <code>requirements.txt</code>, lorsque je relancerai la construction de l'image, les deux premiÃ¨res instructions ne seront pas exÃ©cutÃ©es (tant que l'on garde l'image <code>python:3.9</code> en local), par contre l'instruction <code>COPY</code> ainsi que toutes celles en dessous seront automatiquement relancÃ©es pour prendre en compte les modifications.</p>
<h3 id="les-variables-denvironnement">Les variables d'environnement</h3>
<p>La commande <code>ARG</code> permet de dÃ©finir des variables d'environnement qui ne seront disponibles que durant la construction de l'image, ici les identifiants d'un utilisateur. On a ensuite besoin d'ajouter cet utilisateur et ce groupe dans les utilisateurs du conteneur, ce qui ce fait via la commande <code>RUN</code> qui permet de lancer des commandes shell.</p>
<p>Enfin on spÃ©cifie qui sera l'utilisateur de ce conteneur, que sera l'utilisateur que l'on vient de crÃ©er. Cela se fait via la commande <code>USER</code>.</p>
<p>A la diffÃ©rence de <code>ARG</code>, <code>ENV</code> dÃ©finit lui des variables d'environnements qui seront toujours disponibles aprÃ¨s la construction de l'image, et donc lorsque le conteneur sera lancÃ©. On peut comme prÃ©cÃ©demment dÃ©finir un chemin <code>PATH "$PATH:/home/vorph/.local/bin"</code> qui est nÃ©cessaire pour certaines librairies python dans les fichiers <code>requirements.txt</code> et <code>requirements-dev.txt</code>.</p>
<p>si l'on souhaite dÃ©finir une variable d'environnement via l'interface en ligne de commande, cela se fait via l'argument <code>-e</code>.</p>
<p><code>docker run -p 38282:8080 --name blue-app -e APP_COLOR=blue -d kodekloud/simple-webapp</code></p>
<p>Dans un OS Linux, pour savoir quelles sont les variables d'environnement qui Ã©tÃ© dÃ©finies, on utilise la commande <code>env</code>. Dans un conteneur c'est identique, pour pouvoir passer cette commande au conteneur il faut toutefois utiliser la commande <code>docker exec</code>.</p>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">env</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>wizardly_swartz<span class="w"> </span>env
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="nv">PATH</span><span class="o">=</span>/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/vorph/.local/bin:/usr/lib/python3.9/dist-packages
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="nv">HOSTNAME</span><span class="o">=</span>a4e4accc5032
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="nv">TERM</span><span class="o">=</span>xterm
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="nv">LANG</span><span class="o">=</span>C.UTF-8
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="nv">GPG_KEY</span><span class="o">=</span>E3FF2839C048B25C084DEBE9B26995E310250568
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="nv">PYTHON_VERSION</span><span class="o">=</span><span class="m">3</span>.9.10
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="nv">PYTHON_PIP_VERSION</span><span class="o">=</span><span class="m">21</span>.2.4
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="nv">PYTHON_SETUPTOOLS_VERSION</span><span class="o">=</span><span class="m">58</span>.1.0
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="nv">PYTHON_GET_PIP_URL</span><span class="o">=</span>https://github.com/pypa/get-pip/raw/2caf84b14febcda8077e59e9b8a6ef9a680aa392/public/get-pip.py
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="nv">PYTHON_GET_PIP_SHA256</span><span class="o">=</span>7c5239cea323cadae36083079a5ee6b2b3d56f25762a0c060d2867b89e5e06c5
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="nv">HOME</span><span class="o">=</span>/home/vorph
</code></pre></div></td></tr></table></div>
</div>
<h3 id="cmd-versus-entrypoint">CMD versus ENTRYPOINT</h3>
<p><code>ENTRYPOINT</code> et <code>CMD</code> permettent de spÃ©cifier une commande qui sera Ã©xecutÃ©e lorsque l'image sera lancÃ©e en tant que conteneur.</p>
<p>La diffÃ©rence provient dans comment les arguments dans les commandes peuvent Ãªtre surchargÃ©es.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">Ubuntu</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sleep&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p><code>docker run ubuntu-sleeper sleep 10</code></p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">Ubuntu</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sleep&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<code>docker run ubuntu-sleeper sleep 5</code></p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">Ubuntu</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sleep&quot;</span><span class="p">]</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;5&quot;</span><span class="p">]</span><span class="w"> </span>#argument<span class="w"> </span>par<span class="w"> </span>dÃ©faut<span class="w"> </span>pour<span class="w"> </span>l<span class="err">&#39;</span>entrypoint
</code></pre></div></td></tr></table></div>
Les commandes Ã©xecutÃ©es par <code>CMD</code> peuvent Ãªtre complÃ¨tement surchargÃ©es lors de la commande <code>docker run</code>, ce qui n'est pas le cas avec <code>ENTRYPOINT</code>.</p>
<h2 id="docker-compose">docker compose</h2>
<p>Compose est un outil permettant de dÃ©finir et d'exÃ©cuter des applications Docker multi-conteneurs.</p>
<p>Avec Compose, vous utilisez un fichier YAML pour configurer les services de votre application. Ensuite, avec une seule commande, vous crÃ©ez et dÃ©marrez tous les services Ã  partir de votre configuration. Pour en savoir plus sur toutes les fonctionnalitÃ©s de Compose, consultez la liste des fonctionnalitÃ©s.</p>
<p>Compose fonctionne dans tous les environnements : production, staging, dÃ©veloppement, test, ainsi que dans les flux de travail CI. Vous pouvez en savoir plus sur chaque cas dans Cas d'utilisation communs.</p>
<p>L'utilisation de Compose se rÃ©sume Ã  un processus en trois Ã©tapes :</p>
<ol>
<li>DÃ©finissez l'environnement de votre application Ã  l'aide d'un <code>Dockerfile</code> afin qu'il puisse Ãªtre reproduit partout.</li>
<li>DÃ©finissez les services qui composent votre application dans <code>docker-compose.yml</code> afin qu'ils puissent Ãªtre exÃ©cutÃ©s ensemble dans un environnement isolÃ©.</li>
<li>ExÃ©cutez docker compose up et la commande Docker compose dÃ©marre et exÃ©cute votre application entiÃ¨re. Vous pouvez Ã©galement exÃ©cuter docker-compose up en utilisant le binaire docker-compose.</li>
</ol>
<p>Un <code>docker-compose.yml</code> ressemble Ã  ceci :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span><span class="w">  </span><span class="c1"># optional since v1.27.0</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:5000&quot;</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.:/code</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">logvolume01:/var/log</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">    </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">  </span><span class="nt">logvolume01</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div></td></tr></table></div>
<h3 id="surcharger-le-docker-composeyaml-pour-gerer-plusieur-environnements">Surcharger le <code>docker-compose.yaml</code> pour gÃ©rer plusieur environnements</h3>
<h2 id="docker-engine-stockage">Docker engine, stockage</h2>
<p>Le Docker Engine est composÃ© de 3 parties :</p>
<ul>
<li>le docker daemon, qui gÃ¨re le service Docker, les images, conteneurs, volumes etc,</li>
<li>l'API REST, qui fait la liaison entre le docker daemon et les autres programmes,</li>
<li>la cli Dcoker (<code>docker build</code>, <code>docker run</code>, etc).</li>
</ul>
<p>Comment Docker gÃ¨re l'isolation d'un conteneur ?</p>
<p>Chaque conteneur se voit fournir son propre namespace (espace de nom). Un namespace est un contexte qui permet d'identifier et grouper un ensemble logique d'Ã©lÃ©ments utilisÃ©s par un programme. Dans un mÃªme contexte et une mÃªme portÃ©e (scope), un identifiant doit identifier une entitÃ© de maniÃ¨re unique.</p>
<p>Ainsi chaque conteneur, au sein de son namespace, se voit attribuer les caractÃ©ristiques suivantes uniques :</p>
<ul>
<li>Process ID, <a href="https://fr.wikipedia.org/wiki/Identifiant_de_processus">Identifiant de processus</a>,</li>
<li>RÃ©seau,</li>
<li>InterProcess, <a href="https://fr.wikipedia.org/wiki/Communication_inter-processus">communication inter-processus</a>,</li>
<li>SystÃ¨me de montage,</li>
<li>UNIX timesharing.</li>
</ul>
<p>DÃ©veloppons le PID. Lorsqu'un systÃ¨me Linux dÃ©marre, il commence avec un seul processus, avec un identifiant de processus PID : 1, c'est le processus racine qui lance tous les autres processus.</p>
<p><pre class="mermaid"><code>graph LR

    subgraph "Linux System"
    A[PID : 1]

    B[PID : 2]
    C[PID : 3]
    D[PID : 4]

    subgraph "Sous-systÃ¨me (Conteneur)"
    A1[PID : 1]

    B1[PID : 2]
    end
    end

    A-.-&gt; B &amp; C &amp; D
    A1-.-&gt; B1</code></pre>
Une fois que le systÃ¨me est complpÃ¨tement dÃ©marrÃ©, on a tout une famille de processus qui ont chacun un PID unique. On peut obtenir la liste des processus tournant Ã  l'instant t sur une machine Linux via la commande <code>ps</code>.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a>â¯<span class="w"> </span>ps
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">    </span>PID<span class="w"> </span>TTY<span class="w">          </span>TIME<span class="w"> </span>CMD
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="m">58674</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:08<span class="w"> </span>zsh
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span><span class="m">58678</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>zsh
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="m">58724</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>zsh
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">  </span><span class="m">58726</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>zsh
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">  </span><span class="m">58727</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>gitstatusd-linu
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="m">64791</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>bash
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">  </span><span class="m">64958</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>make
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">  </span><span class="m">64959</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:04:51<span class="w"> </span>mkdocs
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w"> </span><span class="m">113746</span><span class="w"> </span>pts/1<span class="w">    </span><span class="m">00</span>:00:00<span class="w"> </span>ps
</code></pre></div></td></tr></table></div>
Maintenant, lorsque l'on lance un conteneur, que l'on peut considÃ©rer comme un sous-systÃ¨me, le sous-systÃ¨me a besoin de se considÃ©rer comme un systÃ¨me indÃ©pendant isolÃ© du reste, et qu'il a ses propres processus, provenant d'un processus root de PID 1.</p>
<p>Docker partageant l'OS de l'hÃ´te, une isolation complÃ¨te comme cela n'est pas possible, et les processus du sous-systÃ¨me ne sont que des autres processus du processus root du systÃ¨me Linux.</p>
<p>Mais Ã  l'intÃ©rieur du conteneur, le fait d'avoir son propre namespace permet de faire en sorte que les processus sont vu comme complÃ¨tement isolÃ©s, il y a donc "virtuellement" un processus de PID 1 dans chaque conteneur.</p>
<pre class="mermaid"><code>graph LR

    subgraph "Linux System"
    A[PID : 1]

    B[PID : 2]
    C[PID : 3]
    D[PID : 4]
    E[PID : 5]
    F[PID : 6]


    subgraph "Sous-systÃ¨me (Conteneur) &lt;br/&gt; namespace"
    A1[PID : 1]

    B1[PID : 2]
    end
    end

    A-.-&gt; B &amp; C &amp; D &amp; E &amp; F
    A1-.-&gt; B1
    E-.-&gt;A1
    F-.-&gt;B1</code></pre>
<p>Les <code>cgroups</code> (control groups) permettent de limiter l'utilisation cpu et mÃ©moire des conteneurs, qui par dÃ©faut est illimitÃ©e.</p>
<ul>
<li><code>docker run --cpus=0.5 ubuntu</code></li>
<li><code>docker run --memory=100m ubuntu</code></li>
</ul>
<h2 id="reseau">RÃ©seau</h2>
<p>Lorsque Docker est installÃ©, il crÃ©e automatiquement 3 rÃ©seaux :</p>
<ul>
<li><code>bridge</code>,</li>
<li><code>none</code>,</li>
<li><code>host</code>.</li>
</ul>
<p><code>bridge</code> est le rÃ©seau par dÃ©faut auquel est reliÃ© un conteneur. Pour l'associer Ã  l'un des deux autres, on utilise le paramÃ¨tre <code>--network</code>.</p>
<ul>
<li><code>docker run ubuntu --network=none</code></li>
<li><code>docker run ubuntu --network=host</code></li>
</ul>
<p><code>bridge</code> est un rÃ©seau privÃ© isolÃ© dans le docker host, chaque conteneur tournant se voit alors attribuÃ© une adresse ip sur ce rÃ©seau.</p>
<p><pre class="mermaid"><code>graph LR

    subgraph "Docker Host"
    A[172.17.0.2 &lt;br/&gt; Conteneur 1]
    B[172.17.0.3 &lt;br/&gt; Conteneur 2]
    C[172.17.0.4 &lt;br/&gt; Conteneur 3]
    D[172.17.0.5 &lt;br/&gt; Conteneur 4]

    E{{ docker0  &lt;br/&gt; 172.17.0.1}}
    end

    E -.- A &amp; B &amp; C &amp; D</code></pre>
Les conteneurs peuvent alors communiquer entre eux via leur ip interne. Pour accÃ©der Ã  un conteneur depuis l'extÃ©rieur, il faut alors associer les ports correspondant correctement, comme vu dans la partie <a href="#mapping-des-ports">Mapping des ports</a>.</p>
<p>Une autre faÃ§on d'avoir accÃ¨s Ã  un conteneur depuis l'extÃ©rieur est de l'associer au rÃ©seau <code>host</code>, toute isolation rÃ©seau est alors supprimÃ©e et le conteneur est directemnt accessible.</p>
<p>Comme son nom l'indique <code>none</code> isole complÃ¨tement un conteneur de tout rÃ©seau, et n'est pas accessible de l'extÃ©rieur ou par un autre conteneur.</p>
<p>Pour crÃ©er un second rÃ©seau dans le docker host, pour par exemple isoler les conteneurs 3 et 4, on peut utiliser la commande <code>docker network create</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span>
<span class="normal"><a href="#__codelineno-30-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a>docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">    </span>--driver<span class="w"> </span>bridge<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span>--subnet<span class="w"> </span><span class="m">182</span>.18.0.1/16<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span>--gateway<span class="w"> </span><span class="m">182</span>.18.0.1<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span>custom-isolated-network
</code></pre></div></td></tr></table></div>
<div class="admonition example">
<p class="admonition-title">Exemple</p>
<p><code>docker run -d -e MYSQL_ROOT_PASSWORD=db_pass123 --name mysql-db --network custom-isolated-network mysql:5.6</code></p>
</div>
<pre class="mermaid"><code>graph LR

    subgraph "Docker Host"
    A[172.17.0.2 &lt;br/&gt; Conteneur 1]
    B[172.17.0.3 &lt;br/&gt; Conteneur 2]
    C[182.18.0.2 &lt;br/&gt; Conteneur 3]
    D[182.18.0.3 &lt;br/&gt; Conteneur 4]

    E{{ docker0  &lt;br/&gt; 172.17.0.1}}
    F{{ docker0  &lt;br/&gt; 182.18.0.1}}
    end

    E -.- A &amp; B
    F -.- C &amp; D</code></pre>
<p>La configuration rÃ©seau de chaque conteneur peut Ãªtre vue via la commande <code>docker inspect</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span>
<span class="normal"><a href="#__codelineno-31-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>network<span class="w"> </span>ls
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>NETWORK<span class="w"> </span>ID<span class="w">     </span>NAME<span class="w">      </span>DRIVER<span class="w">    </span>SCOPE
<a id="__codelineno-31-4" name="__codelineno-31-4"></a>ff42c61ad8f6<span class="w">   </span>bridge<span class="w">    </span>bridge<span class="w">    </span><span class="nb">local</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a>eb710fdaaadf<span class="w">   </span>host<span class="w">      </span>host<span class="w">      </span><span class="nb">local</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a>1fc8a049c70c<span class="w">   </span>none<span class="w">      </span>null<span class="w">      </span><span class="nb">local</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span>
<span class="normal"><a href="#__codelineno-32-22">22</a></span>
<span class="normal"><a href="#__codelineno-32-23">23</a></span>
<span class="normal"><a href="#__codelineno-32-24">24</a></span>
<span class="normal"><a href="#__codelineno-32-25">25</a></span>
<span class="normal"><a href="#__codelineno-32-26">26</a></span>
<span class="normal"><a href="#__codelineno-32-27">27</a></span>
<span class="normal"><a href="#__codelineno-32-28">28</a></span>
<span class="normal"><a href="#__codelineno-32-29">29</a></span>
<span class="normal"><a href="#__codelineno-32-30">30</a></span>
<span class="normal"><a href="#__codelineno-32-31">31</a></span>
<span class="normal"><a href="#__codelineno-32-32">32</a></span>
<span class="normal"><a href="#__codelineno-32-33">33</a></span>
<span class="normal"><a href="#__codelineno-32-34">34</a></span>
<span class="normal"><a href="#__codelineno-32-35">35</a></span>
<span class="normal"><a href="#__codelineno-32-36">36</a></span>
<span class="normal"><a href="#__codelineno-32-37">37</a></span>
<span class="normal"><a href="#__codelineno-32-38">38</a></span>
<span class="normal"><a href="#__codelineno-32-39">39</a></span>
<span class="normal"><a href="#__codelineno-32-40">40</a></span>
<span class="normal"><a href="#__codelineno-32-41">41</a></span>
<span class="normal"><a href="#__codelineno-32-42">42</a></span>
<span class="normal"><a href="#__codelineno-32-43">43</a></span>
<span class="normal"><a href="#__codelineno-32-44">44</a></span>
<span class="normal"><a href="#__codelineno-32-45">45</a></span>
<span class="normal"><a href="#__codelineno-32-46">46</a></span>
<span class="normal"><a href="#__codelineno-32-47">47</a></span>
<span class="normal"><a href="#__codelineno-32-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>vorphus/helloworld-api:1.0-slim
<a id="__codelineno-32-2" name="__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="m">1</span>.0-slim:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>vorphus/helloworld-api
<a id="__codelineno-32-4" name="__codelineno-32-4"></a>Digest:<span class="w"> </span>sha256:7688dd17f1287bba526902186e7677d2ec872ca01dead95801b454b76ed49258
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>Status:<span class="w"> </span>Image<span class="w"> </span>is<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>date<span class="w"> </span><span class="k">for</span><span class="w"> </span>vorphus/helloworld-api:1.0-slim
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>docker.io/vorphus/helloworld-api:1.0-slim
<a id="__codelineno-32-7" name="__codelineno-32-7"></a>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a>â¯<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>helloworld<span class="w"> </span>vorphus/helloworld-api:1.0-slim
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>e321acdf171ff17d731e789120d9f2c366aa75a08b7305b11adbdffc6c653cdf
<a id="__codelineno-32-10" name="__codelineno-32-10"></a>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a>â¯<span class="w"> </span>docker<span class="w"> </span>inspect<span class="w"> </span>helloworld<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s2">&quot;.[0].NetworkSettings&quot;</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="o">{</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">  </span><span class="s2">&quot;Bridge&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">  </span><span class="s2">&quot;SandboxID&quot;</span>:<span class="w"> </span><span class="s2">&quot;9df6d42959f98cfa17790f69bc8b30e0cbec2fe2c54b9289f538e7dc98f1003a&quot;</span>,
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">  </span><span class="s2">&quot;HairpinMode&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">  </span><span class="s2">&quot;LinkLocalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">  </span><span class="s2">&quot;LinkLocalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="w">  </span><span class="s2">&quot;Ports&quot;</span>:<span class="w"> </span><span class="o">{}</span>,
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="w">  </span><span class="s2">&quot;SandboxKey&quot;</span>:<span class="w"> </span><span class="s2">&quot;/var/run/docker/netns/9df6d42959f9&quot;</span>,
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="w">  </span><span class="s2">&quot;SecondaryIPAddresses&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-32-22" name="__codelineno-32-22"></a><span class="w">  </span><span class="s2">&quot;SecondaryIPv6Addresses&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-32-23" name="__codelineno-32-23"></a><span class="w">  </span><span class="s2">&quot;EndpointID&quot;</span>:<span class="w"> </span><span class="s2">&quot;f6ca6b0b04d44343627d938ba99ebec0598cfce606fcf8eb887ba5424ff526d3&quot;</span>,
<a id="__codelineno-32-24" name="__codelineno-32-24"></a><span class="w">  </span><span class="s2">&quot;Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.1&quot;</span>,
<a id="__codelineno-32-25" name="__codelineno-32-25"></a><span class="w">  </span><span class="s2">&quot;GlobalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-26" name="__codelineno-32-26"></a><span class="w">  </span><span class="s2">&quot;GlobalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-32-27" name="__codelineno-32-27"></a><span class="w">  </span><span class="s2">&quot;IPAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.3&quot;</span>,
<a id="__codelineno-32-28" name="__codelineno-32-28"></a><span class="w">  </span><span class="s2">&quot;IPPrefixLen&quot;</span>:<span class="w"> </span><span class="m">16</span>,
<a id="__codelineno-32-29" name="__codelineno-32-29"></a><span class="w">  </span><span class="s2">&quot;IPv6Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-30" name="__codelineno-32-30"></a><span class="w">  </span><span class="s2">&quot;MacAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;02:42:ac:11:00:03&quot;</span>,
<a id="__codelineno-32-31" name="__codelineno-32-31"></a><span class="w">  </span><span class="s2">&quot;Networks&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-32-32" name="__codelineno-32-32"></a><span class="w">    </span><span class="s2">&quot;bridge&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-32-33" name="__codelineno-32-33"></a><span class="w">      </span><span class="s2">&quot;IPAMConfig&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-32-34" name="__codelineno-32-34"></a><span class="w">      </span><span class="s2">&quot;Links&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-32-35" name="__codelineno-32-35"></a><span class="w">      </span><span class="s2">&quot;Aliases&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-32-36" name="__codelineno-32-36"></a><span class="w">      </span><span class="s2">&quot;NetworkID&quot;</span>:<span class="w"> </span><span class="s2">&quot;ff42c61ad8f68c356bdfea4c7f0c04dc1d134c8e543080ec7dd9515eb5b0bb1a&quot;</span>,
<a id="__codelineno-32-37" name="__codelineno-32-37"></a><span class="w">      </span><span class="s2">&quot;EndpointID&quot;</span>:<span class="w"> </span><span class="s2">&quot;f6ca6b0b04d44343627d938ba99ebec0598cfce606fcf8eb887ba5424ff526d3&quot;</span>,
<a id="__codelineno-32-38" name="__codelineno-32-38"></a><span class="w">      </span><span class="s2">&quot;Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.1&quot;</span>,
<a id="__codelineno-32-39" name="__codelineno-32-39"></a><span class="w">      </span><span class="s2">&quot;IPAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.3&quot;</span>,
<a id="__codelineno-32-40" name="__codelineno-32-40"></a><span class="w">      </span><span class="s2">&quot;IPPrefixLen&quot;</span>:<span class="w"> </span><span class="m">16</span>,
<a id="__codelineno-32-41" name="__codelineno-32-41"></a><span class="w">      </span><span class="s2">&quot;IPv6Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-42" name="__codelineno-32-42"></a><span class="w">      </span><span class="s2">&quot;GlobalIPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<a id="__codelineno-32-43" name="__codelineno-32-43"></a><span class="w">      </span><span class="s2">&quot;GlobalIPv6PrefixLen&quot;</span>:<span class="w"> </span><span class="m">0</span>,
<a id="__codelineno-32-44" name="__codelineno-32-44"></a><span class="w">      </span><span class="s2">&quot;MacAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;02:42:ac:11:00:03&quot;</span>,
<a id="__codelineno-32-45" name="__codelineno-32-45"></a><span class="w">      </span><span class="s2">&quot;DriverOpts&quot;</span>:<span class="w"> </span>null
<a id="__codelineno-32-46" name="__codelineno-32-46"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-32-47" name="__codelineno-32-47"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-32-48" name="__codelineno-32-48"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Remarquons que la commande <code>docker inspect</code> ne marche pas uniquement sur les conteneurs, mais aussi sur les rÃ©seaux.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span>
<span class="normal"><a href="#__codelineno-33-20">20</a></span>
<span class="normal"><a href="#__codelineno-33-21">21</a></span>
<span class="normal"><a href="#__codelineno-33-22">22</a></span>
<span class="normal"><a href="#__codelineno-33-23">23</a></span>
<span class="normal"><a href="#__codelineno-33-24">24</a></span>
<span class="normal"><a href="#__codelineno-33-25">25</a></span>
<span class="normal"><a href="#__codelineno-33-26">26</a></span>
<span class="normal"><a href="#__codelineno-33-27">27</a></span>
<span class="normal"><a href="#__codelineno-33-28">28</a></span>
<span class="normal"><a href="#__codelineno-33-29">29</a></span>
<span class="normal"><a href="#__codelineno-33-30">30</a></span>
<span class="normal"><a href="#__codelineno-33-31">31</a></span>
<span class="normal"><a href="#__codelineno-33-32">32</a></span>
<span class="normal"><a href="#__codelineno-33-33">33</a></span>
<span class="normal"><a href="#__codelineno-33-34">34</a></span>
<span class="normal"><a href="#__codelineno-33-35">35</a></span>
<span class="normal"><a href="#__codelineno-33-36">36</a></span>
<span class="normal"><a href="#__codelineno-33-37">37</a></span>
<span class="normal"><a href="#__codelineno-33-38">38</a></span>
<span class="normal"><a href="#__codelineno-33-39">39</a></span>
<span class="normal"><a href="#__codelineno-33-40">40</a></span>
<span class="normal"><a href="#__codelineno-33-41">41</a></span>
<span class="normal"><a href="#__codelineno-33-42">42</a></span>
<span class="normal"><a href="#__codelineno-33-43">43</a></span>
<span class="normal"><a href="#__codelineno-33-44">44</a></span>
<span class="normal"><a href="#__codelineno-33-45">45</a></span>
<span class="normal"><a href="#__codelineno-33-46">46</a></span>
<span class="normal"><a href="#__codelineno-33-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a>â¯<span class="w"> </span>docker<span class="w"> </span>inspect<span class="w"> </span>bridge<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.
<a id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="o">[</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="o">{</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">    </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;bridge&quot;</span>,
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">    </span><span class="s2">&quot;Id&quot;</span>:<span class="w"> </span><span class="s2">&quot;ff42c61ad8f68c356bdfea4c7f0c04dc1d134c8e543080ec7dd9515eb5b0bb1a&quot;</span>,
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">    </span><span class="s2">&quot;Created&quot;</span>:<span class="w"> </span><span class="s2">&quot;2022-05-14T10:50:27.795717043+02:00&quot;</span>,
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">    </span><span class="s2">&quot;Scope&quot;</span>:<span class="w"> </span><span class="s2">&quot;local&quot;</span>,
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="s2">&quot;Driver&quot;</span>:<span class="w"> </span><span class="s2">&quot;bridge&quot;</span>,
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">    </span><span class="s2">&quot;EnableIPv6&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">    </span><span class="s2">&quot;IPAM&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">      </span><span class="s2">&quot;Driver&quot;</span>:<span class="w"> </span><span class="s2">&quot;default&quot;</span>,
<a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="w">      </span><span class="s2">&quot;Options&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="w">      </span><span class="s2">&quot;Config&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="w">        </span><span class="o">{</span>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="w">          </span><span class="s2">&quot;Subnet&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.0/16&quot;</span>,
<a id="__codelineno-33-17" name="__codelineno-33-17"></a><span class="w">          </span><span class="s2">&quot;Gateway&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.1&quot;</span>
<a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="w">      </span><span class="o">]</span>
<a id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-33-21" name="__codelineno-33-21"></a><span class="w">    </span><span class="s2">&quot;Internal&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-33-22" name="__codelineno-33-22"></a><span class="w">    </span><span class="s2">&quot;Attachable&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-33-23" name="__codelineno-33-23"></a><span class="w">    </span><span class="s2">&quot;Ingress&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-33-24" name="__codelineno-33-24"></a><span class="w">    </span><span class="s2">&quot;ConfigFrom&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-25" name="__codelineno-33-25"></a><span class="w">      </span><span class="s2">&quot;Network&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-33-26" name="__codelineno-33-26"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-33-27" name="__codelineno-33-27"></a><span class="w">    </span><span class="s2">&quot;ConfigOnly&quot;</span>:<span class="w"> </span>false,
<a id="__codelineno-33-28" name="__codelineno-33-28"></a><span class="w">    </span><span class="s2">&quot;Containers&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-29" name="__codelineno-33-29"></a><span class="w">      </span><span class="s2">&quot;2cfe62c9e0c3a57a234f52774333af00155e11a67c04f255e3bb6b2e53614649&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-30" name="__codelineno-33-30"></a><span class="w">        </span><span class="s2">&quot;Name&quot;</span>:<span class="w"> </span><span class="s2">&quot;boring_wiles&quot;</span>,
<a id="__codelineno-33-31" name="__codelineno-33-31"></a><span class="w">        </span><span class="s2">&quot;EndpointID&quot;</span>:<span class="w"> </span><span class="s2">&quot;528b6c7e4a71a71455218a980dcaa3a1b627b25c1f638cad8b58984e71454b21&quot;</span>,
<a id="__codelineno-33-32" name="__codelineno-33-32"></a><span class="w">        </span><span class="s2">&quot;MacAddress&quot;</span>:<span class="w"> </span><span class="s2">&quot;02:42:ac:11:00:02&quot;</span>,
<a id="__codelineno-33-33" name="__codelineno-33-33"></a><span class="w">        </span><span class="s2">&quot;IPv4Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;172.17.0.2/16&quot;</span>,
<a id="__codelineno-33-34" name="__codelineno-33-34"></a><span class="w">        </span><span class="s2">&quot;IPv6Address&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-33-35" name="__codelineno-33-35"></a><span class="w">      </span><span class="o">}</span>
<a id="__codelineno-33-36" name="__codelineno-33-36"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-33-37" name="__codelineno-33-37"></a><span class="w">    </span><span class="s2">&quot;Options&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-38" name="__codelineno-33-38"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.bridge.default_bridge&quot;</span>:<span class="w"> </span><span class="s2">&quot;true&quot;</span>,
<a id="__codelineno-33-39" name="__codelineno-33-39"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.bridge.enable_icc&quot;</span>:<span class="w"> </span><span class="s2">&quot;true&quot;</span>,
<a id="__codelineno-33-40" name="__codelineno-33-40"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.bridge.enable_ip_masquerade&quot;</span>:<span class="w"> </span><span class="s2">&quot;true&quot;</span>,
<a id="__codelineno-33-41" name="__codelineno-33-41"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.bridge.host_binding_ipv4&quot;</span>:<span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span>,
<a id="__codelineno-33-42" name="__codelineno-33-42"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.bridge.name&quot;</span>:<span class="w"> </span><span class="s2">&quot;docker0&quot;</span>,
<a id="__codelineno-33-43" name="__codelineno-33-43"></a><span class="w">      </span><span class="s2">&quot;com.docker.network.driver.mtu&quot;</span>:<span class="w"> </span><span class="s2">&quot;1500&quot;</span>
<a id="__codelineno-33-44" name="__codelineno-33-44"></a><span class="w">    </span><span class="o">}</span>,
<a id="__codelineno-33-45" name="__codelineno-33-45"></a><span class="w">    </span><span class="s2">&quot;Labels&quot;</span>:<span class="w"> </span><span class="o">{}</span>
<a id="__codelineno-33-46" name="__codelineno-33-46"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-33-47" name="__codelineno-33-47"></a><span class="o">]</span>
</code></pre></div></td></tr></table></div>
<p>Le docker host possÃ¨de aussi un serveur DNS embarquÃ© pour la rÃ©solution des noms. Il est donc possible de se connecter Ã  un conteneur uniquement via son nom.</p>
<h2 id="docker-registry">Docker registry</h2>
<p>Un registre Docker est l'Ã©quivalent de github, gitlab, etc pour les conteneurs docker. C'est un endroit oÃ¹ sont stockÃ©es et centralisÃ©es les diffÃ©rentes images disponibles sur le web.</p>
<p>il est possible d'avoir un registre docker personnel sur par exemple <a href="https://hub.docker.com/">docker hub</a>.</p>
<div class="admonition example">
<p class="admonition-title">DÃ©ployer un registre privÃ©</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>--restart<span class="o">=</span>always<span class="w"> </span>--name<span class="w"> </span>my-registry<span class="w"> </span>registry:2
</code></pre></div></td></tr></table></div>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a>$<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>nginx:latest
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>latest:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>library/nginx
<a id="__codelineno-35-3" name="__codelineno-35-3"></a>214ca5fb9032:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a>f0156b83954c:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a>5c4340f87b72:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a>9de84a6a72f5:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>63f91b232fe3:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a>860d24db679a:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a>Digest:<span class="w"> </span>sha256:2c72b42c3679c1c819d46296c4e79e69b2616fa28bea92e61d358980e18c9751
<a id="__codelineno-35-10" name="__codelineno-35-10"></a>Status:<span class="w"> </span>Downloaded<span class="w"> </span>newer<span class="w"> </span>image<span class="w"> </span><span class="k">for</span><span class="w"> </span>nginx:latest
<a id="__codelineno-35-11" name="__codelineno-35-11"></a>docker.io/library/nginx:latest
<a id="__codelineno-35-12" name="__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a>$<span class="w"> </span>docker<span class="w"> </span>image<span class="w"> </span>tag<span class="w"> </span>nginx:latest<span class="w"> </span>localhost:5000/nginx:latest
<a id="__codelineno-35-14" name="__codelineno-35-14"></a>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a>$<span class="w"> </span>docker<span class="w"> </span>push<span class="w"> </span>localhost:5000/nginx:latest
</code></pre></div></td></tr></table></div>
The push refers to repository <code>localhost:5000/nginx</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a>curl<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span>localhost:5000/v2/_catalog
</code></pre></div></td></tr></table></div>
</div>
<h2 id="orchestration">Orchestration</h2>
<p>Avec une commande <code>docker run</code>, on est capable de dÃ©ployer une instance d'un conteneur, par exemple une api.</p>
<p>Mais que se passe-t-il si le nombre de requÃªtes envoyÃ©es Ã  cette api est trop important ? On aimerait dÃ©ployer une seconde instance de cette api pour gÃ©rer le flux supplÃ©mentaire.</p>
<p>On pourrait le faire en relanÃ§ant une commande <code>docker run</code>, mais cela demande de le faire de faÃ§on manuelle et de surveiller Ã  chaque fois comment cela se passe.</p>
<p>Si on conteneur crashe, on devrait pouvoir le dÃ©tecter et relancer une image automatiquement.</p>
<p>Si le docker host crashe, tous les conteneurs lancÃ©s s'arrÃªterons aussi.</p>
<p>Pour gÃ©rer ces problÃ¨mes dans un environnement de production, on fait alors appel Ã  des systÃ¨mes d'orchestrations des conteneurs :</p>
<ul>
<li>docker-swarm,</li>
<li>kubernetes,</li>
<li>MESOS.</li>
</ul>
<h2 id="docker-et-vs-code-le-fichier-devcontainer">Docker et VS Code : le fichier <code>.devcontainer</code></h2>
<h2 id="softwares">Softwares</h2>
<ul>
<li><a href="https://rancherdesktop.io/">Container Management and Kubernetes on the Desktop</a></li>
<li><a href="https://iongion.github.io/podman-desktop-companion/">The super duper Podman Desktop Companion</a></li>
<li><a href="https://kompose.io/">Kompose</a></li>
<li>
<p><a href="https://github.com/containerd/nerdctl">nerdctl: Docker-compatible CLI for containerd</a></p>
</li>
<li>
<p><a href="https://linuxembedded.fr/2020/11/namespaces-la-brique-de-base-des-conteneurs">Namespaces : La brique de base des conteneurs</a></p>
</li>
<li><a href="https://resources.infosecinstitute.com/topic/securing-containers-using-docker-isolation/">Securing containers using Docker isolation</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Retour en haut de la page
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.12658920.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5cf534bf.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>